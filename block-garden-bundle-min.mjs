const e={"amber-500":"#f39c12","amber-800":"#8b4513","amber-900":"#654321","antique-white":"#fffacd",beige:"#f5f5dc","black-alpha-60":"#00000099","black-alpha-80":"#000000cc",black:"#000000","blue-400":"#4a90e2","blue-500":"#2196f3","blue-700":"#0066cc",bronze:"#b87333",brown:"#654321",burlywood:"#deb887",chocolate:"#d2691e",coral:"#ff7f50",crimson:"#dc143c","dark-brown":"#59392b","dark-clay":"#cd853f","dark-cyan":"#2f4f2f","dark-green":"#2e5930","dark-olive-green":"#556b2f","dark-orange":"#ff8c00","dark-red":"#8b0000","dark-sea-green-light":"#9bcd9b","dark-sea-green":"#4f7942","dark-slate-gray":"#2f4f4f","dark-tan":"#8b7355","deep-pink":"#ff1493","dim-gray":"#696969","emerald-600":"#45a049","emerald-700":"#27ae60","forest-green":"#228b22",gold:"#ffd700",goldenrod:"#daa520","granite-gray-alpha-30":"#6464644d","gray-100":"#eeeeee","gray-200":"#e3e3e3","gray-300":"#e0e0e0","gray-400":"#dddddd","gray-50":"#f0f0f0","gray-500":"#cccccc","gray-600":"#bbbbbb","gray-700":"#888888","gray-800":"#666666","gray-900":"#333333","gray-alpha-10":"#ffffff1a","gray-alpha-20":"#ffffff33","gray-alpha-30":"#ffffff4d","gray-granite-alpha-30":"#6464644d","green-500":"#4caf50","green-yellow-400":"#adff2f","hot-pink":"#ff69b4","indian-red":"#cd5c5c",jet:"#1c1c1c",khaki:"#ffec8b","lawn-green":"#7cfc00","light-coral-pink":"#f08080","light-coral":"#ffa54f","light-pink":"#ffb6d9","light-sky-blue":"#87ceeb","light-steel-blue":"#c5d1d3","lime-400":"#32cd32","medium-purple":"#8a7fc8","medium-sea-green":"#3cb371","medium-slate-blue":"#9370db","misty-rose":"#ffe4e1","neutral-950":"#555","olive-drab-700":"#6b8e23","orange-500":"#ff6b35","orange-red":"#ff4500","pale-goldenrod":"#eee8aa","pale-green-200":"#90ee90","pale-green-300":"#98fb98",pink:"#ff69b4",plum:"#dda0dd","powder-blue":"#b0e0e6","red-500":"#ff4444","royal-blue":"#4169e1","saddle-brown":"#8b4513","sandy-brown":"#f4a460","sea-green":"#2e8b57","sky-300":"#87ceeb","sky-50":"#e6f3ff","stone-100":"#f1f1f1","stone-50":"#fffafa",tan:"#b8a99a",tomato:"#ff6347",white:"#ffffff","wood-brown":"#362200","yellow-400":"#ffff00","yellow-green-400":"#9acd32"},t={"touch-btn-background":"var(--bg-color-black-alpha-60)","touch-btn-border":"var(--bg-color-gray-alpha-30)","touch-btn":"var(--bg-color-white)","ui-grid-corner-container":"var(--bg-color-white)","ui-grid-corner-heading-background":"var(--black-alpha-80)","ui-grid-corner-heading-border":"var(--bg-color-gray-alpha-10)","ui-grid-corner-heading":"var(--bg-color-white)","ui-grid-corner-sub-heading":"var(--bg-color-white)"};function n(e,t){return Object.entries(t).map(([t,n])=>`${e}${t}${"--bg-color-"===e?"":"-color"}: ${n};`).join("\n")}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var i,a={exports:{}};
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */var s,c=(i||(i=1,s=a,function(e,t,n,r){var o,i=["","webkit","Moz","MS","ms","o"],a=t.createElement("div"),c=Math.round,l=Math.abs,u=Date.now;function d(e,t,n){return setTimeout(b(e,n),t)}function h(e,t,n){return!!Array.isArray(e)&&(f(e,n[t],n),!0)}function f(e,t,n){var o;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==r)for(o=0;o<e.length;)t.call(n,e[o],o,e),o++;else for(o in e)e.hasOwnProperty(o)&&t.call(n,e[o],o,e)}function p(t,n,r){var o="DEPRECATED METHOD: "+n+"\n"+r+" AT \n";return function(){var n=new Error("get-stack-trace"),r=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=e.console&&(e.console.warn||e.console.log);return i&&i.call(e.console,o,r),t.apply(this,arguments)}}o="function"!=typeof Object.assign?function(e){if(e===r||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var o=arguments[n];if(o!==r&&null!==o)for(var i in o)o.hasOwnProperty(i)&&(t[i]=o[i])}return t}:Object.assign;var g=p(function(e,t,n){for(var o=Object.keys(t),i=0;i<o.length;)(!n||n&&e[o[i]]===r)&&(e[o[i]]=t[o[i]]),i++;return e},"extend","Use `assign`."),m=p(function(e,t){return g(e,t,!0)},"merge","Use `assign`.");function v(e,t,n){var r,i=t.prototype;(r=e.prototype=Object.create(i)).constructor=e,r._super=i,n&&o(r,n)}function b(e,t){return function(){return e.apply(t,arguments)}}function y(e,t){return"function"==typeof e?e.apply(t&&t[0]||r,t):e}function I(e,t){return e===r?t:e}function E(e,t,n){f(k(t),function(t){e.addEventListener(t,n,!1)})}function w(e,t,n){f(k(t),function(t){e.removeEventListener(t,n,!1)})}function C(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function A(e,t){return e.indexOf(t)>-1}function k(e){return e.trim().split(/\s+/g)}function R(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function S(e){return Array.prototype.slice.call(e,0)}function _(e,t,n){for(var r=[],o=[],i=0;i<e.length;){var a=t?e[i][t]:e[i];R(o,a)<0&&r.push(e[i]),o[i]=a,i++}return n&&(r=t?r.sort(function(e,n){return e[t]>n[t]}):r.sort()),r}function T(e,t){for(var n,o,a=t[0].toUpperCase()+t.slice(1),s=0;s<i.length;){if((o=(n=i[s])?n+a:t)in e)return o;s++}return r}var L=1;function x(t){var n=t.ownerDocument||t;return n.defaultView||n.parentWindow||e}var N="ontouchstart"in e,O=T(e,"PointerEvent")!==r,B=N&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),W="touch",G="mouse",z=24,M=["x","y"],P=["clientX","clientY"];function D(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){y(e.options.enable,[e])&&n.handler(t)},this.init()}function Z(e,t,n){var o=n.pointers.length,i=n.changedPointers.length,a=1&t&&o-i===0,s=12&t&&o-i===0;n.isFirst=!!a,n.isFinal=!!s,a&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,o=t.pointers,i=o.length;n.firstInput||(n.firstInput=U(t)),i>1&&!n.firstMultiple?n.firstMultiple=U(t):1===i&&(n.firstMultiple=!1);var a=n.firstInput,s=n.firstMultiple,c=s?s.center:a.center,d=t.center=F(o);t.timeStamp=u(),t.deltaTime=t.timeStamp-a.timeStamp,t.angle=V(c,d),t.distance=Y(c,d),function(e,t){var n=t.center,r=e.offsetDelta||{},o=e.prevDelta||{},i=e.prevInput||{};1!==t.eventType&&4!==i.eventType||(o=e.prevDelta={x:i.deltaX||0,y:i.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=o.x+(n.x-r.x),t.deltaY=o.y+(n.y-r.y)}(n,t),t.offsetDirection=H(t.deltaX,t.deltaY);var h,f,p=j(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=p.x,t.overallVelocityY=p.y,t.overallVelocity=l(p.x)>l(p.y)?p.x:p.y,t.scale=s?(h=s.pointers,Y((f=o)[0],f[1],P)/Y(h[0],h[1],P)):1,t.rotation=s?function(e,t){return V(t[1],t[0],P)+V(e[1],e[0],P)}(s.pointers,o):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,o,i,a,s=e.lastInterval||t,c=t.timeStamp-s.timeStamp;if(8!=t.eventType&&(c>25||s.velocity===r)){var u=t.deltaX-s.deltaX,d=t.deltaY-s.deltaY,h=j(c,u,d);o=h.x,i=h.y,n=l(h.x)>l(h.y)?h.x:h.y,a=H(u,d),e.lastInterval=t}else n=s.velocity,o=s.velocityX,i=s.velocityY,a=s.direction;t.velocity=n,t.velocityX=o,t.velocityY=i,t.direction=a}(n,t);var g=e.element;C(t.srcEvent.target,g)&&(g=t.srcEvent.target),t.target=g}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function U(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:c(e.pointers[n].clientX),clientY:c(e.pointers[n].clientY)},n++;return{timeStamp:u(),pointers:t,center:F(t),deltaX:e.deltaX,deltaY:e.deltaY}}function F(e){var t=e.length;if(1===t)return{x:c(e[0].clientX),y:c(e[0].clientY)};for(var n=0,r=0,o=0;o<t;)n+=e[o].clientX,r+=e[o].clientY,o++;return{x:c(n/t),y:c(r/t)}}function j(e,t,n){return{x:t/e||0,y:n/e||0}}function H(e,t){return e===t?1:l(e)>=l(t)?e<0?2:4:t<0?8:16}function Y(e,t,n){n||(n=M);var r=t[n[0]]-e[n[0]],o=t[n[1]]-e[n[1]];return Math.sqrt(r*r+o*o)}function V(e,t,n){n||(n=M);var r=t[n[0]]-e[n[0]],o=t[n[1]]-e[n[1]];return 180*Math.atan2(o,r)/Math.PI}D.prototype={handler:function(){},init:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(x(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(x(this.element),this.evWin,this.domHandler)}};var X={mousedown:1,mousemove:2,mouseup:4},J="mousedown",K="mousemove mouseup";function q(){this.evEl=J,this.evWin=K,this.pressed=!1,D.apply(this,arguments)}v(q,D,{handler:function(e){var t=X[e.type];1&t&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:G,srcEvent:e}))}});var $={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Q={2:W,3:"pen",4:G,5:"kinect"},ee="pointerdown",te="pointermove pointerup pointercancel";function ne(){this.evEl=ee,this.evWin=te,D.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}e.MSPointerEvent&&!e.PointerEvent&&(ee="MSPointerDown",te="MSPointerMove MSPointerUp MSPointerCancel"),v(ne,D,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),o=$[r],i=Q[e.pointerType]||e.pointerType,a=i==W,s=R(t,e.pointerId,"pointerId");1&o&&(0===e.button||a)?s<0&&(t.push(e),s=t.length-1):12&o&&(n=!0),s<0||(t[s]=e,this.callback(this.manager,o,{pointers:t,changedPointers:[e],pointerType:i,srcEvent:e}),n&&t.splice(s,1))}});var re={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function oe(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,D.apply(this,arguments)}function ie(e,t){var n=S(e.touches),r=S(e.changedTouches);return 12&t&&(n=_(n.concat(r),"identifier",!0)),[n,r]}v(oe,D,{handler:function(e){var t=re[e.type];if(1===t&&(this.started=!0),this.started){var n=ie.call(this,e,t);12&t&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:W,srcEvent:e})}}});var ae={touchstart:1,touchmove:2,touchend:4,touchcancel:8},se="touchstart touchmove touchend touchcancel";function ce(){this.evTarget=se,this.targetIds={},D.apply(this,arguments)}function le(e,t){var n=S(e.touches),r=this.targetIds;if(3&t&&1===n.length)return r[n[0].identifier]=!0,[n,n];var o,i,a=S(e.changedTouches),s=[],c=this.target;if(i=n.filter(function(e){return C(e.target,c)}),1===t)for(o=0;o<i.length;)r[i[o].identifier]=!0,o++;for(o=0;o<a.length;)r[a[o].identifier]&&s.push(a[o]),12&t&&delete r[a[o].identifier],o++;return s.length?[_(i.concat(s),"identifier",!0),s]:void 0}function ue(){D.apply(this,arguments);var e=b(this.handler,this);this.touch=new ce(this.manager,e),this.mouse=new q(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function de(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,he.call(this,t)):12&e&&he.call(this,t)}function he(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout(function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)},2500)}}function fe(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var o=this.lastTouches[r],i=Math.abs(t-o.x),a=Math.abs(n-o.y);if(i<=25&&a<=25)return!0}return!1}v(ce,D,{handler:function(e){var t=ae[e.type],n=le.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:W,srcEvent:e})}}),v(ue,D,{handler:function(e,t,n){var r=n.pointerType==W,o=n.pointerType==G;if(!(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)de.call(this,t,n);else if(o&&fe.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var pe=T(a.style,"touchAction"),ge=pe!==r,me="compute",ve="auto",be="manipulation",ye="none",Ie="pan-x",Ee="pan-y",we=function(){if(!ge)return!1;var t={},n=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){t[r]=!n||e.CSS.supports("touch-action",r)}),t}();function Ce(e,t){this.manager=e,this.set(t)}Ce.prototype={set:function(e){e==me&&(e=this.compute()),ge&&this.manager.element.style&&we[e]&&(this.manager.element.style[pe]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return f(this.manager.recognizers,function(t){y(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),function(e){if(A(e,ye))return ye;var t=A(e,Ie),n=A(e,Ee);return t&&n?ye:t||n?t?Ie:Ee:A(e,be)?be:ve}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var r=this.actions,o=A(r,ye)&&!we[ye],i=A(r,Ee)&&!we[Ee],a=A(r,Ie)&&!we[Ie];if(o){var s=1===e.pointers.length,c=e.distance<2,l=e.deltaTime<250;if(s&&c&&l)return}if(!a||!i)return o||i&&6&n||a&&n&z?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Ae=32;function ke(e){this.options=o({},this.defaults,e||{}),this.id=L++,this.manager=null,this.options.enable=I(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Re(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function Se(e){return 16==e?"down":8==e?"up":2==e?"left":4==e?"right":""}function _e(e,t){var n=t.manager;return n?n.get(e):e}function Te(){ke.apply(this,arguments)}function Le(){Te.apply(this,arguments),this.pX=null,this.pY=null}function xe(){Te.apply(this,arguments)}function Ne(){ke.apply(this,arguments),this._timer=null,this._input=null}function Oe(){Te.apply(this,arguments)}function Be(){Te.apply(this,arguments)}function We(){ke.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ge(e,t){return(t=t||{}).recognizers=I(t.recognizers,Ge.defaults.preset),new ze(e,t)}function ze(e,t){var n;this.options=o({},Ge.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((n=this).options.inputClass||(O?ne:B?ce:N?ue:q))(n,Z),this.touchAction=new Ce(this,this.options.touchAction),Me(this,!0),f(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function Me(e,t){var n,r=e.element;r.style&&(f(e.options.cssProps,function(o,i){n=T(r.style,i),t?(e.oldCssProps[n]=r.style[n],r.style[n]=o):r.style[n]=e.oldCssProps[n]||""}),t||(e.oldCssProps={}))}ke.prototype={defaults:{},set:function(e){return o(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(h(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=_e(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return h(e,"dropRecognizeWith",this)||(e=_e(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(h(e,"requireFailure",this))return this;var t=this.requireFail;return-1===R(t,e=_e(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(h(e,"dropRequireFailure",this))return this;e=_e(e,this);var t=R(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function r(n){t.manager.emit(n,e)}n<8&&r(t.options.event+Re(n)),r(t.options.event),e.additionalEvent&&r(e.additionalEvent),n>=8&&r(t.options.event+Re(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=Ae},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},recognize:function(e){var t=o({},e);if(!y(this.options.enable,[this,t]))return this.reset(),void(this.state=Ae);56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},v(Te,ke,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=6&t,o=this.attrTest(e);return r&&(8&n||!o)?16|t:r||o?4&n?8|t:2&t?4|t:2:Ae}}),v(Le,Te,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var e=this.options.direction,t=[];return 6&e&&t.push(Ee),e&z&&t.push(Ie),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,o=e.direction,i=e.deltaX,a=e.deltaY;return o&t.direction||(6&t.direction?(o=0===i?1:i<0?2:4,n=i!=this.pX,r=Math.abs(e.deltaX)):(o=0===a?1:a<0?8:16,n=a!=this.pY,r=Math.abs(e.deltaY))),e.direction=o,n&&r>t.threshold&&o&t.direction},attrTest:function(e){return Te.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Se(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),v(xe,Te,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ye]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),v(Ne,ke,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ve]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,o=e.deltaTime>t.time;if(this._input=e,!r||!n||12&e.eventType&&!o)this.reset();else if(1&e.eventType)this.reset(),this._timer=d(function(){this.state=8,this.tryEmit()},t.time,this);else if(4&e.eventType)return 8;return Ae},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&4&e.eventType?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=u(),this.manager.emit(this.options.event,this._input)))}}),v(Oe,Te,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ye]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),v(Be,Te,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Le.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return 30&n?t=e.overallVelocity:6&n?t=e.overallVelocityX:n&z&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&l(t)>this.options.velocity&&4&e.eventType},emit:function(e){var t=Se(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),v(We,ke,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[be]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,o=e.deltaTime<t.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(r&&o&&n){if(4!=e.eventType)return this.failTimeout();var i=!this.pTime||e.timeStamp-this.pTime<t.interval,a=!this.pCenter||Y(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,a&&i?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=d(function(){this.state=8,this.tryEmit()},t.interval,this),2):8}return Ae},failTimeout:function(){return this._timer=d(function(){this.state=Ae},this.options.interval,this),Ae},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ge.VERSION="2.0.7",Ge.defaults={domEvents:!1,touchAction:me,enable:!0,inputTarget:null,inputClass:null,preset:[[Oe,{enable:!1}],[xe,{enable:!1},["rotate"]],[Be,{direction:6}],[Le,{direction:6},["swipe"]],[We],[We,{event:"doubletap",taps:2},["tap"]],[Ne]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},ze.prototype={set:function(e){return o(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var r=this.recognizers,o=t.curRecognizer;(!o||o&&8&o.state)&&(o=t.curRecognizer=null);for(var i=0;i<r.length;)n=r[i],2===t.stopped||o&&n!=o&&!n.canRecognizeWith(o)?n.reset():n.recognize(e),!o&&14&n.state&&(o=t.curRecognizer=n),i++}},get:function(e){if(e instanceof ke)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(h(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(h(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=R(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==r&&t!==r){var n=this.handlers;return f(k(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==r){var n=this.handlers;return f(k(e),function(e){t?n[e]&&n[e].splice(R(n[e],t),1):delete n[e]}),this}},emit:function(e,n){this.options.domEvents&&function(e,n){var r=t.createEvent("Event");r.initEvent(e,!0,!0),r.gesture=n,n.target.dispatchEvent(r)}(e,n);var r=this.handlers[e]&&this.handlers[e].slice();if(r&&r.length){n.type=e,n.preventDefault=function(){n.srcEvent.preventDefault()};for(var o=0;o<r.length;)r[o](n),o++}},destroy:function(){this.element&&Me(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},o(Ge,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Ae,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:z,DIRECTION_ALL:30,Manager:ze,Input:D,TouchAction:Ce,TouchInput:ce,MouseInput:q,PointerEventInput:ne,TouchMouseInput:ue,SingleTouchInput:oe,Recognizer:ke,AttrRecognizer:Te,Tap:We,Pan:Le,Swipe:Be,Pinch:xe,Rotate:Oe,Press:Ne,on:E,off:w,each:f,merge:m,extend:g,assign:o,inherit:v,bindFn:b,prefixed:T}),(void 0!==e?e:"undefined"!=typeof self?self:{}).Hammer=Ge,s.exports?s.exports=Ge:e.Hammer=Ge}(window,document)),a.exports),l=o(c);function u(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var d,h={exports:{}};
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var f=(d||(d=1,h.exports=function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){if(!s&&u)return u(a);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return o(n||e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var i=u,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){(function(e){var n,r,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var i=0,a=new o(u),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var c=new e.MessageChannel;c.port1.onmessage=u,n=function(){c.port2.postMessage(0)}}var l=[];function u(){var e,t;r=!0;for(var n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}r=!1}function d(e){1!==l.push(e)||r||n()}t.exports=d}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){var r=e(1);function o(){}var i={},a=["REJECTED"],s=["FULFILLED"],c=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==o&&f(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r(function(){var r;try{r=t(n)}catch(t){return i.reject(e,t)}r===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,r)})}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var n=!1;function r(t){n||(n=!0,i.reject(e,t))}function o(t){n||(n=!0,i.resolve(e,t))}function a(){t(o,r)}var s=p(a);"error"===s.status&&r(s.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}function g(e){return e instanceof this?e:i.resolve(new this(o),e)}function m(e){var t=new this(o);return i.reject(t,e)}function v(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,c=-1,l=new this(o);++c<n;)u(e[c],c);return l;function u(e,o){function c(e){a[o]=e,++s!==n||r||(r=!0,i.resolve(l,a))}t.resolve(e).then(c,function(e){r||(r=!0,i.reject(l,e))})}}function b(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=-1,s=new this(o);++a<n;)c(e[a]);return s;function c(e){t.resolve(e).then(function(e){r||(r=!0,i.resolve(s,e))},function(e){r||(r=!0,i.reject(s,e))})}}t.exports=l,l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(o);return this.state!==c?d(n,this.state===s?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){i.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},i.resolve=function(e,t){var n=p(h,t);if("error"===n.status)return i.reject(e,n.value);var r=n.value;if(r)f(e,r);else{e.state=s,e.outcome=t;for(var o=-1,a=e.queue.length;++o<a;)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},l.resolve=g,l.reject=m,l.all=v,l.race=b},{1:1}],3:[function(e,t,n){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}var a=i();function s(){try{if(!a||!a.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}function c(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var l=Promise;function u(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function d(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function h(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function f(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var p="local-forage-detect-blob-support",g=void 0,m={},v=Object.prototype.toString,b="readonly",y="readwrite";function I(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}function E(e){return new l(function(t){var n=e.transaction(p,y),r=c([""]);n.objectStore(p).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}}).catch(function(){return!1})}function w(e){return"boolean"==typeof g?l.resolve(g):E(e).then(function(e){return g=e})}function C(e){var t=m[e.name],n={};n.promise=new l(function(e,t){n.resolve=e,n.reject=t}),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then(function(){return n.promise}):t.dbReady=n.promise}function A(e){var t=m[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function k(e,t){var n=m[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function R(e,t){return new l(function(n,r){if(m[e.name]=m[e.name]||G(),e.db){if(!t)return n(e.db);C(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var i=a.open.apply(a,o);t&&(i.onupgradeneeded=function(t){var n=i.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(p)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),i.onerror=function(e){e.preventDefault(),r(i.error)},i.onsuccess=function(){var t=i.result;t.onversionchange=function(e){e.target.close()},n(t),A(e)}})}function S(e){return R(e,!1)}function _(e){return R(e,!0)}function T(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,o=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||n){if(n){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function L(e){return new l(function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)})}function x(e){return c([I(atob(e.data))],{type:e.type})}function N(e){return e&&e.__local_forage_encoded_blob}function O(e){var t=this,n=t._initReady().then(function(){var e=m[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return d(n,e,e),n}function B(e){C(e);for(var t=m[e.name],n=t.forages,r=0;r<n.length;r++){var o=n[r];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,S(e).then(function(t){return e.db=t,T(e)?_(e):t}).then(function(r){e.db=t.db=r;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=r}).catch(function(t){throw k(e,t),t})}function W(e,t,n,r){void 0===r&&(r=1);try{var o=e.db.transaction(e.storeName,t);n(null,o)}catch(o){if(r>0&&(!e.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return l.resolve().then(function(){if(!e.db||"NotFoundError"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),_(e)}).then(function(){return B(e).then(function(){W(e,t,n,r-1)})}).catch(n);n(o)}}function G(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function z(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var o=m[n.name];o||(o=G(),m[n.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=O);var i=[];function a(){return l.resolve()}for(var s=0;s<o.forages.length;s++){var c=o.forages[s];c!==t&&i.push(c._initReady().catch(a))}var u=o.forages.slice(0);return l.all(i).then(function(){return n.db=o.db,S(n)}).then(function(e){return n.db=e,T(n,t._defaultConfig.version)?_(n):e}).then(function(e){n.db=o.db=e,t._dbInfo=n;for(var r=0;r<u.length;r++){var i=u[r];i!==t&&(i._dbInfo.db=n.db,i._dbInfo.version=n.version)}})}function M(e,t){var n=this;e=h(e);var r=new l(function(t,r){n.ready().then(function(){W(n._dbInfo,b,function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),N(e)&&(e=x(e)),t(e)},a.onerror=function(){r(a.error)}}catch(e){r(e)}})}).catch(r)});return u(r,t),r}function P(e,t){var n=this,r=new l(function(t,r){n.ready().then(function(){W(n._dbInfo,b,function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;N(r)&&(r=x(r));var o=e(r,n.key,s++);void 0!==o?t(o):n.continue()}else t()},a.onerror=function(){r(a.error)}}catch(e){r(e)}})}).catch(r)});return u(r,t),r}function D(e,t,n){var r=this;e=h(e);var o=new l(function(n,o){var i;r.ready().then(function(){return i=r._dbInfo,"[object Blob]"===v.call(t)?w(i.db).then(function(e){return e?t:L(t)}):t}).then(function(t){W(r._dbInfo,y,function(i,a){if(i)return o(i);try{var s=a.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var c=s.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),n(t)},a.onabort=a.onerror=function(){var e=c.error?c.error:c.transaction.error;o(e)}}catch(e){o(e)}})}).catch(o)});return u(o,n),o}function Z(e,t){var n=this;e=h(e);var r=new l(function(t,r){n.ready().then(function(){W(n._dbInfo,y,function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){r(a.error)},i.onabort=function(){var e=a.error?a.error:a.transaction.error;r(e)}}catch(e){r(e)}})}).catch(r)});return u(r,t),r}function U(e){var t=this,n=new l(function(e,n){t.ready().then(function(){W(t._dbInfo,y,function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=i.error?i.error:i.transaction.error;n(e)}}catch(e){n(e)}})}).catch(n)});return u(n,e),n}function F(e){var t=this,n=new l(function(e,n){t.ready().then(function(){W(t._dbInfo,b,function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){n(i.error)}}catch(e){n(e)}})}).catch(n)});return u(n,e),n}function j(e,t){var n=this,r=new l(function(t,r){e<0?t(null):n.ready().then(function(){W(n._dbInfo,b,function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName),s=!1,c=a.openKeyCursor();c.onsuccess=function(){var n=c.result;n?0===e||s?t(n.key):(s=!0,n.advance(e)):t(null)},c.onerror=function(){r(c.error)}}catch(e){r(e)}})}).catch(r)});return u(r,t),r}function H(e){var t=this,n=new l(function(e,n){t.ready().then(function(){W(t._dbInfo,b,function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).openKeyCursor(),a=[];i.onsuccess=function(){var t=i.result;t?(a.push(t.key),t.continue()):e(a)},i.onerror=function(){n(i.error)}}catch(e){n(e)}})}).catch(n)});return u(n,e),n}function Y(e,t){t=f.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;if(e.name){var i=e.name===n.name&&o._dbInfo.db?l.resolve(o._dbInfo.db):S(e).then(function(t){var n=m[e.name],r=n.forages;n.db=t;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=t;return t});r=e.storeName?i.then(function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;C(e);var r=m[e.name],o=r.forages;t.close();for(var i=0;i<o.length;i++){var s=o[i];s._dbInfo.db=null,s._dbInfo.version=n}var c=new l(function(t,r){var o=a.open(e.name,n);o.onerror=function(e){o.result.close(),r(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}});return c.then(function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,A(n._dbInfo)}}).catch(function(t){throw(k(e,t)||l.resolve()).catch(function(){}),t})}}):i.then(function(t){C(e);var n=m[e.name],r=n.forages;t.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;var i=new l(function(t,n){var r=a.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}});return i.then(function(e){n.db=e;for(var t=0;t<r.length;t++)A(r[t]._dbInfo)}).catch(function(t){throw(k(e,t)||l.resolve()).catch(function(){}),t})})}else r=l.reject("Invalid arguments");return u(r,t),r}var V={_driver:"asyncStorage",_initStorage:z,_support:s(),iterate:P,getItem:M,setItem:D,removeItem:Z,clear:U,length:F,key:j,keys:H,dropInstance:Y};function X(){return"function"==typeof openDatabase}var J="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",K="~~local_forage_type~",q=/^~~local_forage_type~([^~]+)~/,$="__lfsc__:",Q=$.length,ee="arbf",te="blob",ne="si08",re="ui08",oe="uic8",ie="si16",ae="si32",se="ur16",ce="ui32",le="fl32",ue="fl64",de=Q+ee.length,he=Object.prototype.toString;function fe(e){var t,n,r,o,i,a=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l=new ArrayBuffer(a),u=new Uint8Array(l);for(t=0;t<s;t+=4)n=J.indexOf(e[t]),r=J.indexOf(e[t+1]),o=J.indexOf(e[t+2]),i=J.indexOf(e[t+3]),u[c++]=n<<2|r>>4,u[c++]=(15&r)<<4|o>>2,u[c++]=(3&o)<<6|63&i;return l}function pe(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=J[n[t]>>2],r+=J[(3&n[t])<<4|n[t+1]>>4],r+=J[(15&n[t+1])<<2|n[t+2]>>6],r+=J[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function ge(e,t){var n="";if(e&&(n=he.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===he.call(e.buffer))){var r,o=$;e instanceof ArrayBuffer?(r=e,o+=ee):(r=e.buffer,"[object Int8Array]"===n?o+=ne:"[object Uint8Array]"===n?o+=re:"[object Uint8ClampedArray]"===n?o+=oe:"[object Int16Array]"===n?o+=ie:"[object Uint16Array]"===n?o+=se:"[object Int32Array]"===n?o+=ae:"[object Uint32Array]"===n?o+=ce:"[object Float32Array]"===n?o+=le:"[object Float64Array]"===n?o+=ue:t(new Error("Failed to get type for BinaryArray"))),t(o+pe(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var n=K+e.type+"~"+pe(this.result);t($+te+n)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}}function me(e){if(e.substring(0,Q)!==$)return JSON.parse(e);var t,n=e.substring(de),r=e.substring(Q,de);if(r===te&&q.test(n)){var o=n.match(q);t=o[1],n=n.substring(o[0].length)}var i=fe(n);switch(r){case ee:return i;case te:return c([i],{type:t});case ne:return new Int8Array(i);case re:return new Uint8Array(i);case oe:return new Uint8ClampedArray(i);case ie:return new Int16Array(i);case se:return new Uint16Array(i);case ae:return new Int32Array(i);case ce:return new Uint32Array(i);case le:return new Float32Array(i);case ue:return new Float64Array(i);default:throw new Error("Unkown type: "+r)}}var ve={serialize:ge,deserialize:me,stringToBuffer:fe,bufferToString:pe};function be(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function ye(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var o=new l(function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction(function(o){be(o,n,function(){t._dbInfo=n,e()},function(e,t){r(t)})},r)});return n.serializer=ve,o}function Ie(e,t,n,r,o,i){e.executeSql(n,r,o,function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],function(e,s){s.rows.length?i(e,a):be(e,t,function(){e.executeSql(n,r,o,i)},i)},i):i(e,a)},i)}function Ee(e,t){var n=this;e=h(e);var r=new l(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){Ie(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),t(r)},function(e,t){r(t)})})}).catch(r)});return u(r,t),r}function we(e,t){var n=this,r=new l(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){Ie(n,o,"SELECT * FROM "+o.storeName,[],function(n,r){for(var i=r.rows,a=i.length,s=0;s<a;s++){var c=i.item(s),l=c.value;if(l&&(l=o.serializer.deserialize(l)),void 0!==(l=e(l,c.key,s+1)))return void t(l)}t()},function(e,t){r(t)})})}).catch(r)});return u(r,t),r}function Ce(e,t,n,r){var o=this;e=h(e);var i=new l(function(i,a){o.ready().then(function(){void 0===t&&(t=null);var s=t,c=o._dbInfo;c.serializer.serialize(t,function(t,l){l?a(l):c.db.transaction(function(n){Ie(n,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],function(){i(s)},function(e,t){a(t)})},function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void i(Ce.apply(o,[e,s,n,r-1]));a(t)}})})}).catch(a)});return u(i,n),i}function Ae(e,t,n){return Ce.apply(this,[e,t,n,1])}function ke(e,t){var n=this;e=h(e);var r=new l(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){Ie(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){r(t)})})}).catch(r)});return u(r,t),r}function Re(e){var t=this,n=new l(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){Ie(t,r,"DELETE FROM "+r.storeName,[],function(){e()},function(e,t){n(t)})})}).catch(n)});return u(n,e),n}function Se(e){var t=this,n=new l(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){Ie(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],function(t,n){var r=n.rows.item(0).c;e(r)},function(e,t){n(t)})})}).catch(n)});return u(n,e),n}function _e(e,t){var n=this,r=new l(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){Ie(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)},function(e,t){r(t)})})}).catch(r)});return u(r,t),r}function Te(e){var t=this,n=new l(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){Ie(t,r,"SELECT key FROM "+r.storeName,[],function(t,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);e(r)},function(e,t){n(t)})})}).catch(n)});return u(n,e),n}function Le(e){return new l(function(t,n){e.transaction(function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(n,r){for(var o=[],i=0;i<r.rows.length;i++)o.push(r.rows.item(i).name);t({db:e,storeNames:o})},function(e,t){n(t)})},function(e){n(e)})})}function xe(e,t){t=f.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;return u(r=e.name?new l(function(t){var r;r=e.name===n.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(Le(r))}).then(function(e){return new l(function(t,n){e.db.transaction(function(r){function o(e){return new l(function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],function(){t()},function(e,t){n(t)})})}for(var i=[],a=0,s=e.storeNames.length;a<s;a++)i.push(o(e.storeNames[a]));l.all(i).then(function(){t()}).catch(function(e){n(e)})},function(e){n(e)})})}):l.reject("Invalid arguments"),t),r}var Ne={_driver:"webSQLStorage",_initStorage:ye,_support:X(),iterate:we,getItem:Ee,setItem:Ae,removeItem:ke,clear:Re,length:Se,key:_e,keys:Te,dropInstance:xe};function Oe(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function Be(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function We(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}function Ge(){return!We()||localStorage.length>0}function ze(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=Be(e,t._defaultConfig),Ge()?(t._dbInfo=n,n.serializer=ve,l.resolve()):l.reject()}function Me(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}});return u(n,e),n}function Pe(e,t){var n=this;e=h(e);var r=n.ready().then(function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r});return u(r,t),r}function De(e,t){var n=this,r=n.ready().then(function(){for(var t=n._dbInfo,r=t.keyPrefix,o=r.length,i=localStorage.length,a=1,s=0;s<i;s++){var c=localStorage.key(s);if(0===c.indexOf(r)){var l=localStorage.getItem(c);if(l&&(l=t.serializer.deserialize(l)),void 0!==(l=e(l,c.substring(o),a++)))return l}}});return u(r,t),r}function Ze(e,t){var n=this,r=n.ready().then(function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t});return u(r,t),r}function Ue(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo,n=localStorage.length,r=[],o=0;o<n;o++){var i=localStorage.key(o);0===i.indexOf(e.keyPrefix)&&r.push(i.substring(e.keyPrefix.length))}return r});return u(n,e),n}function Fe(e){var t=this.keys().then(function(e){return e.length});return u(t,e),t}function je(e,t){var n=this;e=h(e);var r=n.ready().then(function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return u(r,t),r}function He(e,t,n){var r=this;e=h(e);var o=r.ready().then(function(){void 0===t&&(t=null);var n=t;return new l(function(o,i){var a=r._dbInfo;a.serializer.serialize(t,function(t,r){if(r)i(r);else try{localStorage.setItem(a.keyPrefix+e,t),o(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||i(e),i(e)}})})});return u(o,n),o}function Ye(e,t){if(t=f.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,o=this;return r=e.name?new l(function(t){e.storeName?t(Be(e,o._defaultConfig)):t(e.name+"/")}).then(function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}}):l.reject("Invalid arguments"),u(r,t),r}var Ve={_driver:"localStorageWrapper",_initStorage:ze,_support:Oe(),iterate:De,getItem:Pe,setItem:He,removeItem:je,clear:Me,length:Fe,key:Ze,keys:Ue,dropInstance:Ye},Xe=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},Je=function(e,t){for(var n=e.length,r=0;r<n;){if(Xe(e[r],t))return!0;r++}return!1},Ke=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},qe={},$e={},Qe={INDEXEDDB:V,WEBSQL:Ne,LOCALSTORAGE:Ve},et=[Qe.INDEXEDDB._driver,Qe.WEBSQL._driver,Qe.LOCALSTORAGE._driver],tt=["dropInstance"],nt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),rt={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ot(e,t){e[t]=function(){var n=arguments;return e.ready().then(function(){return e[t].apply(e,n)})}}function it(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Ke(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var at=function(){function e(t){for(var n in o(this,e),Qe)if(Qe.hasOwnProperty(n)){var r=Qe[n],i=r._driver;this[n]=i,qe[i]||this.defineDriver(r)}this._defaultConfig=it({},rt),this._config=it({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new l(function(t,n){try{var r=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(o);for(var i=nt.concat("_initStorage"),a=0,s=i.length;a<s;a++){var c=i[a];if((!Je(tt,c)||e[c])&&"function"!=typeof e[c])return void n(o)}var d=function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=l.reject(t);return u(n,arguments[arguments.length-1]),n}},n=0,r=tt.length;n<r;n++){var o=tt[n];e[o]||(e[o]=t(o))}};d();var h=function(n){qe[r]&&console.info("Redefining LocalForage driver: "+r),qe[r]=e,$e[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(h,n):h(!!e._support):h(!0)}catch(e){n(e)}});return d(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=qe[e]?l.resolve(qe[e]):l.reject(new Error("Driver not found."));return d(r,t,n),r},e.prototype.getSerializer=function(e){var t=l.resolve(ve);return d(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return d(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;Ke(e)||(e=[e]);var o=this._getSupportedDrivers(e);function i(){r._config.driver=r.driver()}function a(e){return r._extend(e),i(),r._ready=r._initStorage(r._config),r._ready}function s(e){return function(){var t=0;function n(){for(;t<e.length;){var o=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(o).then(a).catch(n)}i();var s=new Error("No available storage method found.");return r._driverSet=l.reject(s),r._driverSet}return n()}}var c=null!==this._driverSet?this._driverSet.catch(function(){return l.resolve()}):l.resolve();return this._driverSet=c.then(function(){var e=o[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then(function(e){r._driver=e._driver,i(),r._wrapLibraryMethodsWithReady(),r._initDriver=s(o)})}).catch(function(){i();var e=new Error("No available storage method found.");return r._driverSet=l.reject(e),r._driverSet}),d(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!$e[e]},e.prototype._extend=function(e){it(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=nt.length;e<t;e++)ot(this,nt[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),st=new at;t.exports=st},{3:3}]},{},[4])(4)),h.exports),p=o(f),g=Object.defineProperty,m=(e,t,n)=>(((e,t,n)=>{t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),v=(e,t)=>{if(Object(t)!==t)throw TypeError('Cannot use the "in" operator on this value');return e.has(t)},b=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},y=(e,t,n)=>(((e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)})(e,t,"access private method"),n);
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
function I(e,t){return Object.is(e,t)}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */let E=null,w=!1,C=1;const A=Symbol("SIGNAL");function k(e){const t=E;return E=e,t}const R={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function S(e){if(w)throw new Error("undefined"!=typeof ngDevMode&&ngDevMode?"Assertion error: signal read during notification phase":"");if(null===E)return;E.consumerOnSignalRead(e);const t=E.nextProducerIndex++;if(B(E),t<E.producerNode.length&&E.producerNode[t]!==e&&O(E)){N(E.producerNode[t],E.producerIndexOfThis[t])}E.producerNode[t]!==e&&(E.producerNode[t]=e,E.producerIndexOfThis[t]=O(E)?x(e,E,t):0),E.producerLastReadVersion[t]=e.version}function _(e){if(e.dirty||e.lastCleanEpoch!==C){if(!e.producerMustRecompute(e)&&!function(e){B(e);for(let t=0;t<e.producerNode.length;t++){const n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version)return!0;if(_(n),r!==n.version)return!0}return!1}(e))return e.dirty=!1,void(e.lastCleanEpoch=C);e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=C}}function T(e){if(void 0===e.liveConsumerNode)return;const t=w;w=!0;try{for(const t of e.liveConsumerNode)t.dirty||L(t)}finally{w=t}}function L(e){var t;e.dirty=!0,T(e),null==(t=e.consumerMarkedDirty)||t.call(e.wrapper??e)}function x(e,t,n){var r;if(W(e),B(e),0===e.liveConsumerNode.length){null==(r=e.watched)||r.call(e.wrapper);for(let t=0;t<e.producerNode.length;t++)e.producerIndexOfThis[t]=x(e.producerNode[t],e,t)}return e.liveConsumerIndexOfThis.push(n),e.liveConsumerNode.push(t)-1}function N(e,t){var n;if(W(e),B(e),"undefined"!=typeof ngDevMode&&ngDevMode&&t>=e.liveConsumerNode.length)throw new Error(`Assertion error: active consumer index ${t} is out of bounds of ${e.liveConsumerNode.length} consumers)`);if(1===e.liveConsumerNode.length){null==(n=e.unwatched)||n.call(e.wrapper);for(let t=0;t<e.producerNode.length;t++)N(e.producerNode[t],e.producerIndexOfThis[t])}const r=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[r],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[r],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){const n=e.liveConsumerIndexOfThis[t],r=e.liveConsumerNode[t];B(r),r.producerIndexOfThis[n]=t}}function O(e){var t;return e.consumerIsAlwaysLive||((null==(t=null==e?void 0:e.liveConsumerNode)?void 0:t.length)??0)>0}function B(e){e.producerNode??(e.producerNode=[]),e.producerIndexOfThis??(e.producerIndexOfThis=[]),e.producerLastReadVersion??(e.producerLastReadVersion=[])}function W(e){e.liveConsumerNode??(e.liveConsumerNode=[]),e.liveConsumerIndexOfThis??(e.liveConsumerIndexOfThis=[])}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */function G(e){if(_(e),S(e),e.value===P)throw e.error;return e.value}const z=Symbol("UNSET"),M=Symbol("COMPUTING"),P=Symbol("ERRORED"),D=(()=>({...R,value:z,dirty:!0,error:null,equal:I,producerMustRecompute:e=>e.value===z||e.value===M,producerRecomputeValue(e){if(e.value===M)throw new Error("Detected cycle in computations.");const t=e.value;e.value=M;const n=function(e){return e&&(e.nextProducerIndex=0),k(e)}(e);let r,o=!1;try{r=e.computation.call(e.wrapper);o=t!==z&&t!==P&&e.equal.call(e.wrapper,t,r)}catch(t){r=P,e.error=t}finally{!function(e,t){if(k(t),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(O(e))for(let t=e.nextProducerIndex;t<e.producerNode.length;t++)N(e.producerNode[t],e.producerIndexOfThis[t]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}(e,n)}o?e.value=t:(e.value=r,e.version++)}}))();let Z=
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
function(){throw new Error};function U(){return S(this),this.value}function F(e,t){!1===(null==E?void 0:E.consumerAllowSignalWrites)&&Z(),e.equal.call(e.wrapper,e.value,t)||(e.value=t,function(e){e.version++,C++,T(e)}
/**
 * @license
 * Copyright 2024 Bloomberg Finance L.P.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))}const j=(()=>({...R,equal:I,value:void 0}))();const H=Symbol("node");var Y;(e=>{var t,n,r,o;t=H,n=new WeakSet,e.isState=e=>"object"==typeof e&&v(n,e),e.State=class{constructor(r,o={}){b(this,n),m(this,t);const i=
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
function(e){const t=Object.create(j);t.value=e;const n=()=>(S(t),t.value);return n[A]=t,n}(r),a=i[A];if(this[H]=a,a.wrapper=this,o){const t=o.equals;t&&(a.equal=t),a.watched=o[e.subtle.watched],a.unwatched=o[e.subtle.unwatched]}}get(){if(!(0,e.isState)(this))throw new TypeError("Wrong receiver type for Signal.State.prototype.get");return U.call(this[H])}set(t){if(!(0,e.isState)(this))throw new TypeError("Wrong receiver type for Signal.State.prototype.set");if(w)throw new Error("Writes to signals not permitted during Watcher callback");F(this[H],t)}};r=H,o=new WeakSet,e.isComputed=e=>"object"==typeof e&&v(o,e),e.Computed=class{constructor(t,n){b(this,o),m(this,r);const i=function(e){const t=Object.create(D);t.computation=e;const n=()=>G(t);return n[A]=t,n}(t),a=i[A];if(a.consumerAllowSignalWrites=!0,this[H]=a,a.wrapper=this,n){const t=n.equals;t&&(a.equal=t),a.watched=n[e.subtle.watched],a.unwatched=n[e.subtle.unwatched]}}get(){if(!(0,e.isComputed)(this))throw new TypeError("Wrong receiver type for Signal.Computed.prototype.get");return G(this[H])}},(t=>{var n,r,o,i;t.untrack=function(e){let t,n=null;try{n=k(null),t=e()}finally{k(n)}return t},t.introspectSources=function(t){var n;if(!(0,e.isComputed)(t)&&!(0,e.isWatcher)(t))throw new TypeError("Called introspectSources without a Computed or Watcher argument");return(null==(n=t[H].producerNode)?void 0:n.map(e=>e.wrapper))??[]},t.introspectSinks=function(t){var n;if(!(0,e.isComputed)(t)&&!(0,e.isState)(t))throw new TypeError("Called introspectSinks without a Signal argument");return(null==(n=t[H].liveConsumerNode)?void 0:n.map(e=>e.wrapper))??[]},t.hasSinks=function(t){if(!(0,e.isComputed)(t)&&!(0,e.isState)(t))throw new TypeError("Called hasSinks without a Signal argument");const n=t[H].liveConsumerNode;return!!n&&n.length>0},t.hasSources=function(t){if(!(0,e.isComputed)(t)&&!(0,e.isWatcher)(t))throw new TypeError("Called hasSources without a Computed or Watcher argument");const n=t[H].producerNode;return!!n&&n.length>0};n=H,r=new WeakSet,o=new WeakSet,i=function(t){for(const n of t)if(!(0,e.isComputed)(n)&&!(0,e.isState)(n))throw new TypeError("Called watch/unwatch without a Computed or State argument")},e.isWatcher=e=>v(r,e),t.Watcher=class{constructor(e){b(this,r),b(this,o),m(this,n);let t=Object.create(R);t.wrapper=this,t.consumerMarkedDirty=e,t.consumerIsAlwaysLive=!0,t.consumerAllowSignalWrites=!1,t.producerNode=[],this[H]=t}watch(...t){if(!(0,e.isWatcher)(this))throw new TypeError("Called unwatch without Watcher receiver");y(this,o,i).call(this,t);const n=this[H];n.dirty=!1;const r=k(n);for(const e of t)S(e[H]);k(r)}unwatch(...t){if(!(0,e.isWatcher)(this))throw new TypeError("Called unwatch without Watcher receiver");y(this,o,i).call(this,t);const n=this[H];B(n);for(let e=n.producerNode.length-1;e>=0;e--)if(t.includes(n.producerNode[e].wrapper)){N(n.producerNode[e],n.producerIndexOfThis[e]);const t=n.producerNode.length-1;if(n.producerNode[e]=n.producerNode[t],n.producerIndexOfThis[e]=n.producerIndexOfThis[t],n.producerNode.length--,n.producerIndexOfThis.length--,n.nextProducerIndex--,e<n.producerNode.length){const t=n.producerIndexOfThis[e],r=n.producerNode[e];W(r),r.liveConsumerIndexOfThis[t]=e}}}getPending(){if(!(0,e.isWatcher)(this))throw new TypeError("Called getPending without Watcher receiver");return this[H].producerNode.filter(e=>e.dirty).map(e=>e.wrapper)}},t.currentComputed=function(){var e;return null==(e=E)?void 0:e.wrapper},t.watched=Symbol("watched"),t.unwatched=Symbol("unwatched")})(e.subtle||(e.subtle={}))})(Y||(Y={}));const V={AIR:"Air",AGAVE_BASE:"Agave Base",AGAVE_FLOWER_STALK:"Agave Flower Stalk",AGAVE_FLOWER:"Agave Flower",AGAVE_GROWING:"Agave Growing",AGAVE_SPIKE:"Agave Spike",AGAVE:"Agave",BAMBOO_GROWING:"Bamboo Growing",BAMBOO_JOINT:"Bamboo Joint",BAMBOO_LEAVES:"Bamboo Leaves",BAMBOO_STALK:"Bamboo Stalk",BAMBOO:"Bamboo",BEDROCK:"Bedrock",BERRY_BUSH_BERRIES:"Berry Bush Berries",BERRY_BUSH_BRANCH:"Berry Bush Branch",BERRY_BUSH_GROWING:"Berry Bush Growing",BERRY_BUSH_LEAVES:"Berry Bush Leaves",BERRY_BUSH:"Berry Bush",BIRCH_BARK:"Birch Bark",BIRCH_BRANCHES:"Birch Branches",BIRCH_CATKINS:"Birch Catkins",BIRCH_GROWING:"Birch Growing",BIRCH_LEAVES:"Birch Leaves",BIRCH_TRUNK:"Birch Trunk",BIRCH:"Birch",CACTUS_BODY:"Cactus Body",CACTUS_FLOWER:"Cactus Flower",CACTUS_GROWING:"Cactus Growing",CACTUS:"Cactus",CARROT_GROWING:"Carrot Growing",CARROT_LEAVES:"Carrot Leaves",CARROT_ROOT:"Carrot Root",CARROT:"Carrot",CLAY:"Clay",CLOUD:"Cloud",COAL:"Coal",CORN_EAR:"Corn Ear",CORN_GROWING:"Corn Growing",CORN_LEAVES:"Corn Leaves",CORN_SILK:"Corn Silk",CORN_STALK:"Corn Stalk",CORN:"Corn",DIRT:"Dirt",FERN_FROND:"Fern Frond",FERN_GROWING:"Fern Growing",FERN_STEM:"Fern Stem",FERN:"Fern",FOG:"Fog",GOLD:"Gold",GRASS:"Grass",ICE:"Ice",IRON:"Iron",KELP_BLADE:"Kelp Blade",KELP_BULB:"Kelp Bulb",KELP_GROWING:"Kelp Growing",KELP:"Kelp",LAVA:"Lava",LAVENDER_BUSH:"Lavender Bush",LAVENDER_FLOWERS:"Lavender Flowers",LAVENDER_GROWING:"Lavender Growing",LAVENDER_STEM:"Lavender Stem",LAVENDER:"Lavender",LOTUS_BUD:"Lotus Bud",LOTUS_FLOWER:"Lotus Flower",LOTUS_GROWING:"Lotus Growing",LOTUS_PAD:"Lotus Pad",LOTUS_STEM:"Lotus Stem",LOTUS:"Lotus",MOSS:"Moss",MUSHROOM_CAP:"Mushroom Cap",MUSHROOM_GROWING:"Mushroom Growing",MUSHROOM_STEM:"Mushroom Stem",MUSHROOM:"Mushroom",PINE_CONE:"Pine Cone",PINE_NEEDLES:"Pine Needles",PINE_TREE_GROWING:"Pine Tree Growing",PINE_TREE:"Pine Tree",PINE_TRUNK:"Pine Trunk",PUMICE:"Pumice",PUMPKIN_FRUIT:"Pumpkin Fruit",PUMPKIN_GROWING:"Pumpkin Growing",PUMPKIN_LEAVES:"Pumpkin Leaves",PUMPKIN_STEM:"Pumpkin Stem",PUMPKIN_VINE:"Pumpkin Vine",PUMPKIN:"Pumpkin",ROSE_BLOOM:"Rose Bloom",ROSE_BUD:"Rose Bud",ROSE_GROWING:"Rose Growing",ROSE_LEAVES:"Rose Leaves",ROSE_STEM:"Rose Stem",ROSE_THORNS:"Rose Thorns",ROSE:"Rose",SAND:"Sand",SNOW:"Snow",STONE:"Stone",SUNFLOWER_CENTER:"Sunflower Center",SUNFLOWER_GROWING:"Sunflower Growing",SUNFLOWER_LEAVES:"Sunflower Leaves",SUNFLOWER_PETALS:"Sunflower Petals",SUNFLOWER_STEM:"Sunflower Stem",SUNFLOWER:"Sunflower",TREE_GROWING:"Tree Growing",TREE_LEAVES:"Tree Leaves",TREE_TRUNK:"Tree Trunk",TULIP_BULB:"Tulip Bulb",TULIP_GROWING:"Tulip Growing",TULIP_LEAVES:"Tulip Leaves",TULIP_PETALS:"Tulip Petals",TULIP_STEM:"Tulip Stem",TULIP:"Tulip",WATER:"Water",WHEAT_GRAIN:"Wheat Grain",WHEAT_GROWING:"Wheat Growing",WHEAT_STALK:"Wheat Stalk",WHEAT:"Wheat",WILLOW_BRANCHES:"Willow Branches",WILLOW_LEAVES:"Willow Leaves",WILLOW_TREE_GROWING:"Willow Tree Growing",WILLOW_TREE:"Willow Tree",WILLOW_TRUNK:"Willow Trunk",WOOD:"Wood"},X=[{name:V.AIR,color:[0,0,0,0]},{name:V.AGAVE_BASE,color:[.4,.6,.5,1]},{name:V.AGAVE_FLOWER_STALK,color:[.5,.7,.5,1]},{name:V.AGAVE_FLOWER,color:[.9,.9,.6,1]},{name:V.AGAVE_GROWING,color:[.5,.7,.6,1]},{name:V.AGAVE_SPIKE,color:[.4,.6,.5,1]},{name:V.AGAVE,color:[.4,.6,.5,1],growthTime:1920,isSeed:!0},{name:V.BAMBOO_GROWING,color:[.4,.7,.4,1]},{name:V.BAMBOO_JOINT,color:[.35,.65,.25,1]},{name:V.BAMBOO_LEAVES,color:[.3,.6,.3,1]},{name:V.BAMBOO_STALK,color:[.4,.7,.3,1]},{name:V.BAMBOO,color:[.4,.7,.3,1],growthTime:180,isSeed:!0},{name:V.BEDROCK,color:[.1,.1,.1,1]},{name:V.BERRY_BUSH_BERRIES,color:[.8,.2,.2,1]},{name:V.BERRY_BUSH_BRANCH,color:[.4,.3,.2,1]},{name:V.BERRY_BUSH_GROWING,color:[.4,.6,.4,1]},{name:V.BERRY_BUSH_LEAVES,color:[.2,.5,.2,1]},{name:V.BERRY_BUSH,color:[.3,.5,.3,1],growthTime:360,isSeed:!0},{name:V.BIRCH_BARK,color:[.8,.8,.75,1]},{name:V.BIRCH_BRANCHES,color:[.85,.85,.8,1]},{name:V.BIRCH_CATKINS,color:[.7,.6,.3,1]},{name:V.BIRCH_GROWING,color:[.8,.9,.8,1]},{name:V.BIRCH_LEAVES,color:[.3,.7,.3,1]},{name:V.BIRCH_TRUNK,color:[.9,.9,.85,1]},{name:V.BIRCH,color:[.9,.9,.85,1],growthTime:1260,isSeed:!0},{name:V.CACTUS_BODY,color:[.3,.6,.3,1]},{name:V.CACTUS_FLOWER,color:[.9,.3,.5,1]},{name:V.CACTUS_GROWING,color:[.4,.7,.4,1]},{name:V.CACTUS,color:[.3,.6,.3,1],growthTime:2400,isSeed:!0},{name:V.CARROT_GROWING,color:[.5,.7,.3,1]},{name:V.CARROT_LEAVES,color:[.3,.7,.3,1]},{name:V.CARROT_ROOT,color:[.9,.5,.1,1]},{name:V.CARROT,color:[.9,.5,.1,1],growthTime:240,isSeed:!0},{name:V.CLAY,color:[.7,.7,.75,1]},{name:V.CLOUD,color:[.9,.9,.9,.8]},{name:V.COAL,color:[.15,.15,.15,1]},{name:V.CORN_EAR,color:[.8,.8,.2,1]},{name:V.CORN_GROWING,color:[.5,.7,.4,1]},{name:V.CORN_LEAVES,color:[.3,.5,.3,1]},{name:V.CORN_SILK,color:[.7,.6,.5,1]},{name:V.CORN_STALK,color:[.4,.6,.3,1]},{name:V.CORN,color:[.8,.8,.2,1],growthTime:420,isSeed:!0},{name:V.DIRT,color:[.55,.4,.25,1]},{name:V.FERN_FROND,color:[.3,.6,.3,1]},{name:V.FERN_GROWING,color:[.4,.6,.4,1]},{name:V.FERN_STEM,color:[.3,.5,.3,1]},{name:V.FERN,color:[.3,.6,.3,1],growthTime:90,isSeed:!0},{name:V.GOLD,color:[.9,.8,.1,1]},{name:V.GRASS,color:[.3,.8,.3,1]},{name:V.ICE,color:[.6,.8,1,.7]},{name:V.IRON,color:[.7,.6,.5,1]},{name:V.KELP_BLADE,color:[.2,.4,.2,1]},{name:V.KELP_BULB,color:[.3,.5,.2,1]},{name:V.KELP_GROWING,color:[.3,.5,.3,1]},{name:V.KELP,color:[.2,.4,.2,1],growthTime:150,isSeed:!0},{name:V.LAVA,color:[.9,.3,0,1],gravity:!0},{name:V.LAVENDER_BUSH,color:[.4,.6,.4,1]},{name:V.LAVENDER_FLOWERS,color:[.55,.4,.6,1]},{name:V.LAVENDER_GROWING,color:[.45,.3,.45,1]},{name:V.LAVENDER_STEM,color:[.3,.4,.3,1]},{name:V.LAVENDER,color:[.5,.3,.5,1],growthTime:200,isSeed:!0},{name:V.LOTUS_BUD,color:[.6,.4,.4,1]},{name:V.LOTUS_FLOWER,color:[.7,.5,.5,1]},{name:V.LOTUS_GROWING,color:[.4,.5,.4,1]},{name:V.LOTUS_PAD,color:[.3,.5,.3,1]},{name:V.LOTUS_STEM,color:[.4,.6,.4,1]},{name:V.LOTUS,color:[.8,.6,.7,1],growthTime:390,isSeed:!0},{name:V.MUSHROOM_CAP,color:[.8,.2,.2,1]},{name:V.MUSHROOM_GROWING,color:[.6,.5,.5,1]},{name:V.MUSHROOM_STEM,color:[.9,.85,.8,1]},{name:V.MUSHROOM,color:[.8,.6,.6,1],growthTime:120,isSeed:!0},{name:V.PINE_CONE,color:[.4,.3,.2,1]},{name:V.PINE_NEEDLES,color:[.2,.4,.2,1]},{name:V.PINE_TREE_GROWING,color:[.4,.6,.4,1]},{name:V.PINE_TREE,color:[.2,.4,.2,1],growthTime:1440,isSeed:!0},{name:V.PINE_TRUNK,color:[.3,.2,.1,1]},{name:V.PUMICE,color:[.7,.7,.7,1]},{name:V.PUMPKIN_FRUIT,color:[.9,.5,.1,1]},{name:V.PUMPKIN_GROWING,color:[.5,.7,.4,1]},{name:V.PUMPKIN_LEAVES,color:[.3,.6,.3,1]},{name:V.PUMPKIN_STEM,color:[.5,.6,.4,1]},{name:V.PUMPKIN_VINE,color:[.4,.6,.3,1]},{name:V.PUMPKIN,color:[.9,.5,.1,1],growthTime:660,isSeed:!0},{name:V.ROSE_BLOOM,color:[.9,.1,.2,1]},{name:V.ROSE_BUD,color:[.7,.2,.3,1]},{name:V.ROSE_GROWING,color:[.4,.7,.4,1]},{name:V.ROSE_LEAVES,color:[.2,.6,.2,1]},{name:V.ROSE_STEM,color:[.2,.5,.2,1]},{name:V.ROSE_THORNS,color:[.3,.4,.3,1]},{name:V.ROSE,color:[.9,.1,.2,1],growthTime:540,isSeed:!0},{name:V.SAND,color:[.9,.85,.6,1],gravity:!0},{name:V.SNOW,color:[.95,.95,1,1]},{name:V.STONE,color:[.5,.5,.5,1]},{name:V.SUNFLOWER_CENTER,color:[.4,.3,.1,1]},{name:V.SUNFLOWER_GROWING,color:[.5,.7,.4,1]},{name:V.SUNFLOWER_LEAVES,color:[.3,.6,.3,1]},{name:V.SUNFLOWER_PETALS,color:[.9,.8,.1,1]},{name:V.SUNFLOWER_STEM,color:[.3,.5,.3,1]},{name:V.SUNFLOWER,color:[.9,.8,.1,1],growthTime:600,isSeed:!0},{name:V.TREE_GROWING,color:[.4,.6,.3,1]},{name:V.TREE_LEAVES,color:[.2,.6,.2,1]},{name:V.TREE_TRUNK,color:[.45,.3,.15,1]},{name:V.TULIP_BULB,color:[.6,.5,.4,1]},{name:V.TULIP_GROWING,color:[.6,.8,.6,1]},{name:V.TULIP_LEAVES,color:[.4,.7,.4,1]},{name:V.TULIP_PETALS,color:[.8,.4,.8,1]},{name:V.TULIP_STEM,color:[.5,.8,.5,1]},{name:V.TULIP,color:[.8,.4,.8,1],growthTime:300,isSeed:!0},{name:V.WATER,color:[.2,.4,.8,.6],gravity:!0},{name:V.WHEAT_GRAIN,color:[.9,.85,.4,1]},{name:V.WHEAT_GROWING,color:[.5,.7,.3,1]},{name:V.WHEAT_STALK,color:[.8,.8,.4,1]},{name:V.WHEAT,color:[.85,.8,.4,1],growthTime:480,isSeed:!0},{name:V.WILLOW_BRANCHES,color:[.4,.6,.3,1]},{name:V.WILLOW_LEAVES,color:[.5,.7,.4,1]},{name:V.WILLOW_TREE_GROWING,color:[.5,.6,.4,1]},{name:V.WILLOW_TREE,color:[.5,.5,.3,1],growthTime:1800,isSeed:!0},{name:V.WILLOW_TRUNK,color:[.5,.35,.2,1]},{name:V.WOOD,color:[.6,.45,.25,1]}],J={blockNames:V,blocks:X,currentResolution:new Y.State("400"),version:new Y.State("1"),useTouchControls:new Y.State(!0)},K=16,q=128,$=16;class Q{constructor(e,t){this.chunkX=e,this.chunkZ=t,this.blocks=new Uint8Array(32768),this.dirty=!0,this.mesh=null}index(e,t,n){return e+n*K+t*K*$}inBounds(e,t,n){return e>=0&&e<K&&t>=0&&t<q&&n>=0&&n<$}getBlock(e,t,n){return this.inBounds(e,t,n)?this.blocks[this.index(e,t,n)]:0}setBlock(e,t,n,r){if(!this.inBounds(e,t,n))return!1;const o=this.index(e,t,n);return this.blocks[o]!==r&&(this.blocks[o]=r,this.dirty=!0),!0}isEmpty(){for(let e=0;e<32768;e++)if(0!==this.blocks[e])return!1;return!0}clear(){this.blocks.fill(0),this.dirty=!0}get worldX(){return this.chunkX*K}get worldZ(){return this.chunkZ*$}}function ee(e,t){return{chunkX:Math.floor(e/K),chunkZ:Math.floor(t/$),localX:(e%K+K)%K,localZ:(t%$+$)%$}}const te={curBlock:new Y.State(2),world:new class{constructor(){this.chunks=new Map,this.loadRadius=4}getChunkKey(e,t){return`${e},${t}`}getOrCreateChunk(e,t){const n=this.getChunkKey(e,t);let r=this.chunks.get(n);return r||(r=new Q(e,t),this.chunks.set(n,r)),r}getChunk(e,t){return this.chunks.get(this.getChunkKey(e,t))}getBlock(e,t,n){if(t<=0)return 1;if(t>=q)return 0;const r=Math.floor(e),o=Math.floor(t),i=Math.floor(n),{chunkX:a,chunkZ:s,localX:c,localZ:l}=ee(r,i),u=this.getChunk(a,s);return u?u.getBlock(c,o,l):0}setBlock(e,t,n,r){if(t<=0||t>=q)return!1;const o=Math.floor(e),i=Math.floor(t),a=Math.floor(n),{chunkX:s,chunkZ:c,localX:l,localZ:u}=ee(o,a),d=this.getOrCreateChunk(s,c).setBlock(l,i,u,r);return d&&this.markNeighborsDirty(s,c,l,u),d}markNeighborsDirty(e,t,n,r){if(0===n){const n=this.getChunk(e-1,t);n&&(n.dirty=!0)}if(15===n){const n=this.getChunk(e+1,t);n&&(n.dirty=!0)}if(0===r){const n=this.getChunk(e,t-1);n&&(n.dirty=!0)}if(15===r){const n=this.getChunk(e,t+1);n&&(n.dirty=!0)}}hasBlock(e,t,n){return 0!==this.getBlock(e,t,n)}deleteBlock(e,t,n){return this.setBlock(e,t,n,0)}clear(){this.chunks.clear()}getAllChunks(){return this.chunks.values()}getVisibleChunks(e,t){const{chunkX:n,chunkZ:r}=ee(e,t),o=[];for(const e of this.chunks.values()){const t=Math.abs(e.chunkX-n),i=Math.abs(e.chunkZ-r);t<=this.loadRadius&&i<=this.loadRadius&&o.push(e)}return o}forEach(e){for(const t of this.chunks.values()){const n=t.worldX,r=t.worldZ;for(let o=1;o<q;o++)for(let i=0;i<$;i++)for(let a=0;a<K;a++){const s=t.getBlock(a,o,i);if(0!==s){e(s,`${n+a},${o},${r+i}`)}}}}*entries(){for(const e of this.chunks.values()){const t=e.worldX,n=e.worldZ;for(let r=1;r<q;r++)for(let o=0;o<$;o++)for(let i=0;i<K;i++){const a=e.getBlock(i,r,o);if(0!==a){const e=`${t+i},${r},${n+o}`;yield[e,a]}}}}has(e){const[t,n,r]=e.split(",").map(Number);return this.hasBlock(t,n,r)}get(e){const[t,n,r]=e.split(",").map(Number),o=this.getBlock(t,n,r);return 0===o?void 0:o}set(e,t){const[n,r,o]=e.split(",").map(Number);return this.setBlock(n,r,o,t),this}delete(e){const[t,n,r]=e.split(",").map(Number);return this.deleteBlock(t,n,r)}},seed:Math.random(),yaw:0,pitch:0,x:0,y:2,z:5,dx:0,dy:0,dz:0,playerHeight:1.8,playerWidth:.6,flySpeed:10,flying:!1,onGround:!1,hit:null,lastSpacePressTime:0,spacePressed:!1,uiButtonActive:!1,plantStructures:{},growthTimers:{},isPrePlanted:!1,fastGrowth:!1,shouldReset:new Y.State(!1)},ne={currentBlock:new Y.Computed(()=>{const e=te.curBlock.get(),t=J.blocks[e];return t?.name||"Air"})};function re(e,t){const n=te[e]?.get();void 0!==n&&te[e].set(t(n))}function oe(e,t){const n=J[e]?.get();void 0!==n&&J[e].set(t(n))}function ie(e,t){return J[e]?.set(t)}function ae(e){return J[e]?.get()}function se(e,t){return te[e]?.set(t)}function ce(e){return te[e]?.get()}async function le(e,t){return J.version.set(t),e.blockGarden={...e?.blockGarden,config:J,state:te,computed:ne,setConfig:ie,getConfig:ae,updateConfig:oe,setState:se,getState:ce,updateState:re},{computedSignals:ne,gameConfig:J,gameState:te}}function ue(e){const t=e.host;e.querySelectorAll(".touch-btn").forEach(e=>{const n=e.getAttribute("data-key");let r=!1;function o(){if(!r&&(r=!0,te.uiButtonActive=!0,t.touchKeys[n]=!0,e instanceof HTMLButtonElement&&(e.style.background="var(--bg-color-gray-alpha-30)"),"backspace"===n)){const e=te.hit;e&&te.world.delete(`${e.x},${e.y},${e.z}`)}}function i(){r=!1,te.uiButtonActive=!1,t.touchKeys[n]=!1,e instanceof HTMLButtonElement&&(e.style.background="var(--bg-ui-touch-btn-background-color)")}e.addEventListener("touchstart",e=>{e.preventDefault(),e.stopPropagation(),o()}),e.addEventListener("touchend",e=>{e.preventDefault(),e.stopPropagation(),i()}),e.addEventListener("touchcancel",e=>{e.preventDefault(),e.stopPropagation(),i()}),e.addEventListener("mousedown",e=>{e.preventDefault(),e.stopPropagation(),o()}),e.addEventListener("mouseup",e=>{e.preventDefault(),e.stopPropagation(),i()}),e.addEventListener("mouseleave",e=>{e.preventDefault(),e.stopPropagation(),i()}),e.addEventListener("pointerdown",e=>{e.stopPropagation()})}),e.addEventListener("keyup",e=>{t.keys[e.key.toLowerCase()]=!1,e.preventDefault()}),e.addEventListener("touchstart",t=>{(t.target instanceof HTMLDivElement&&t.target.closest(".touch-controls")||t.target===e.getElementById("canvas"))&&t.preventDefault()},{passive:!1}),e.addEventListener("touchmove",t=>{(t.target instanceof HTMLDivElement&&t.target.closest(".touch-controls")||t.target===e.getElementById("canvas"))&&t.preventDefault()},{passive:!1}),e.addEventListener("touchend",t=>{(t.target instanceof HTMLDivElement&&t.target.closest(".touch-controls")||t.target===e.getElementById("canvas"))&&t.preventDefault()},{passive:!1}),e.addEventListener("contextmenu",t=>{(t.target instanceof HTMLDivElement&&t.target.closest(".touch-controls")||t.target===e.getElementById("canvas"))&&t.preventDefault()}),e.addEventListener("dblclick",t=>{(t.target instanceof HTMLDivElement&&t.target.closest(".touch-controls")||t.target===e.getElementById("canvas"))&&t.preventDefault()})}function de(e,t){return e.minX<=t.maxX&&e.maxX>=t.minX&&e.minY<=t.maxY&&e.maxY>=t.minY&&e.minZ<=t.maxZ&&e.maxZ>=t.minZ}let he=!0;const fe=new Y.subtle.Watcher(()=>{he&&(he=!1,globalThis.queueMicrotask(pe))});function pe(){he=!0;for(const e of fe.getPending())e.get();fe.watch()}function ge(e){let t;const n=new Y.Computed(()=>{"function"==typeof t&&t(),t=e()});return fe.watch(n),n.get(),()=>{fe.unwatch(n),"function"==typeof t&&t(),t=void 0}}function me(e,t,n,r){return n<=0||e.hasBlock(Math.floor(t),Math.floor(n),Math.floor(r))}function ve(e,t){const n=e.getElementById("canvas");if(n instanceof HTMLCanvasElement){const r=t.get();if("fullscreen"===r)return e.host.classList.remove("resolution","resolution-400","resolution-800"),n.width=globalThis.innerWidth,n.height=globalThis.innerHeight,n.style.width="100vw",n.style.width="100dvw",n.style.height="100vh",void(n.style.height="100dvh");e.host.classList.add("resolution"),e.host.classList.remove("resolution-400","resolution-800");const o=parseInt(r);n.width=o,n.height=o,n.style.width=o+"px",n.style.height=o+"px",e.host.classList.add(`resolution-${o}`)}}const be=1/3,ye=1/6,Ie=e=>0|Math.floor(e),Ee=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function we(e=Math.random){const t=function(e){const t=512,n=new Uint8Array(t);for(let e=0;e<t/2;e++)n[e]=e;for(let r=0;r<t/2-1;r++){const t=r+~~(e()*(256-r)),o=n[r];n[r]=n[t],n[t]=o}for(let e=256;e<t;e++)n[e]=n[e-256];return n}(e),n=new Float64Array(t).map(e=>Ee[e%12*3]),r=new Float64Array(t).map(e=>Ee[e%12*3+1]),o=new Float64Array(t).map(e=>Ee[e%12*3+2]);return function(e,i,a){let s,c,l,u;const d=(e+i+a)*be,h=Ie(e+d),f=Ie(i+d),p=Ie(a+d),g=(h+f+p)*ye,m=e-(h-g),v=i-(f-g),b=a-(p-g);let y,I,E,w,C,A;m>=v?v>=b?(y=1,I=0,E=0,w=1,C=1,A=0):m>=b?(y=1,I=0,E=0,w=1,C=0,A=1):(y=0,I=0,E=1,w=1,C=0,A=1):v<b?(y=0,I=0,E=1,w=0,C=1,A=1):m<b?(y=0,I=1,E=0,w=0,C=1,A=1):(y=0,I=1,E=0,w=1,C=1,A=0);const k=m-y+ye,R=v-I+ye,S=b-E+ye,_=m-w+2*ye,T=v-C+2*ye,L=b-A+2*ye,x=m-1+.5,N=v-1+.5,O=b-1+.5,B=255&h,W=255&f,G=255&p;let z=.6-m*m-v*v-b*b;if(z<0)s=0;else{const e=B+t[W+t[G]];z*=z,s=z*z*(n[e]*m+r[e]*v+o[e]*b)}let M=.6-k*k-R*R-S*S;if(M<0)c=0;else{const e=B+y+t[W+I+t[G+E]];M*=M,c=M*M*(n[e]*k+r[e]*R+o[e]*S)}let P=.6-_*_-T*T-L*L;if(P<0)l=0;else{const e=B+w+t[W+C+t[G+A]];P*=P,l=P*P*(n[e]*_+r[e]*T+o[e]*L)}let D=.6-x*x-N*N-O*O;if(D<0)u=0;else{const e=B+1+t[W+1+t[G+1]];D*=D,u=D*D*(n[e]*x+r[e]*N+o[e]*O)}return 32*(s+c+l+u)}}var Ce,Ae={exports:{}};var ke=o((Ce||(Ce=1,Ae.exports=function(){return e.importState=function(t){var n=new e;return n.importState(t),n},e;function e(){return function(e){var n=0,r=0,o=0,i=1;0==e.length&&(e=[+new Date]);var a=t();n=a(" "),r=a(" "),o=a(" ");for(var s=0;s<e.length;s++)(n-=a(e[s]))<0&&(n+=1),(r-=a(e[s]))<0&&(r+=1),(o-=a(e[s]))<0&&(o+=1);a=null;var c=function(){var e=2091639*n+2.3283064365386963e-10*i;return n=r,r=o,o=e-(i=0|e)};return c.next=c,c.uint32=function(){return 4294967296*c()},c.fract53=function(){return c()+11102230246251565e-32*(2097152*c()|0)},c.version="Alea 0.9",c.args=e,c.exportState=function(){return[n,r,o,i]},c.importState=function(e){n=+e[0]||0,r=+e[1]||0,o=+e[2]||0,i=+e[3]||0},c}(Array.prototype.slice.call(arguments))}function t(){var e=4022871197,t=function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t.version="Mash 0.9",t}}()),Ae.exports));let Re=null,Se=null;function _e(e){e!==Se&&(Se=e,Re=we(ke(e)))}function Te(e,t,n,r=0,o=3,i=.5,a=.02){Re&&Se===r||_e(r);let s=0,c=1,l=a,u=0;for(let r=0;r<o;r++)s+=Re(e*l,t*l,n*l)*c,u+=c,c*=i,l*=2;return s/u}function Le(e,t,n=0){return function(e,t,n=0,r=3,o=.5,i=.02){Re&&Se===n||_e(n);let a=0,s=1,c=i,l=0;for(let n=0;n<r;n++)a+=Re(e*c,t*c,0)*s,l+=s,s*=o,c*=2;return a/l}(e,t,n,4,.5,.01)}function xe(e,t,n,r,o,i){const a=4+Math.floor(2*Math.random());for(let i=0;i<a;i++)e.set(`${t},${n+i},${r}`,o);for(let o=t-2;o<=t+2;o++)for(let s=r-2;s<=r+2;s++)for(let c=n+a-2;c<=n+a+1;c++)if(Math.abs(o-t)+Math.abs(s-r)+Math.abs(c-(n+a))<=3){const t=`${o},${c},${s}`;e.has(t)||e.set(t,i)}}function Ne(e){return()=>{e.curBlock.set((e.curBlock.get()+1)%J.blocks.length)}}let Oe=0;function Be(e,t,n){const r=e.getElementById("fastGrowthButton");r&&(r.addEventListener("click",()=>{o.fastGrowth=!o.fastGrowth,r.textContent=o.fastGrowth?"Disable Fast Growth":"Enable Fast Growth",r.style.backgroundColor=o.fastGrowth?"var(--bg-color-red-500)":"var(--bg-color-green-500)",r.style.color="var(--bg-color-white)",e.dispatchEvent(new CustomEvent("block-garden-reset"))}),r.textContent="Enable Fast Growth",r.style.backgroundColor="var(--bg-color-green-500)",r.style.color="var(--bg-color-white)");const o=globalThis.blockGarden.state;o.isPrePlanted=!0;const i=e.host,a=e.getElementById("togglePrePlanting");a&&(a.addEventListener("click",()=>{o.isPrePlanted=!o.isPrePlanted,a.textContent=o.isPrePlanted?"Disable Pre-Planting":"Enable Pre-Planting",a.style.backgroundColor=o.isPrePlanted?"var(--bg-color-red-500)":"var(--bg-color-green-500)",a.style.color="var(--bg-color-white)"}),a.textContent=o.isPrePlanted?"Disable Pre-Planting":"Enable Pre-Planting",a.style.backgroundColor=o.isPrePlanted?"var(--bg-color-red-500)":"var(--bg-color-green-500)",a.style.color="var(--bg-color-white)");const s=e.getElementById("randomPlantButton");s&&s.addEventListener("click",()=>{d(),alert("Random planting complete!")});const c=e.querySelector('[data-key="backquote"]');c.addEventListener("click",Ne(o)),c.addEventListener("touchstart",Ne(o)),e.querySelector('[data-key="backquote"]').addEventListener("click",()=>{o.curBlock.set((o.curBlock.get()+1)%J.blocks.length)}),e.addEventListener("keyup",e=>{i.keys[e.key.toLowerCase()]=!1,e.preventDefault()});const l=e.getElementById("resolutionSelect");l&&l.addEventListener("change",t=>{J.currentResolution.set(t.detail.value),ve(e,J.currentResolution)}),e.addEventListener("mousemove",n=>{if(globalThis.document.pointerLockElement===t||globalThis.document.pointerLockElement===e.host){o.yaw-=.0025*n.movementX;const e=Math.PI/2-.01;o.pitch=Math.max(-e,Math.min(e,o.pitch-.0025*n.movementY))}}),e.addEventListener("touchstart",t=>{Oe=Date.now(),(t.target instanceof HTMLDivElement&&t.target.closest(".touch-controls")||t.target===e.getElementById("canvas"))&&t.cancelable&&t.preventDefault()},{passive:!1}),e.addEventListener("touchmove",t=>{Oe=Date.now(),(t.target instanceof HTMLDivElement&&t.target.closest(".touch-controls")||t.target===e.getElementById("canvas"))&&t.cancelable&&t.preventDefault()},{passive:!1}),e.addEventListener("touchend",t=>{Oe=Date.now(),(t.target instanceof HTMLDivElement&&t.target.closest(".touch-controls")||t.target===e.getElementById("canvas"))&&t.cancelable&&t.preventDefault()},{passive:!1}),e.addEventListener("contextmenu",t=>{(t.target instanceof HTMLDivElement&&t.target.closest(".touch-controls")||t.target===e.getElementById("canvas"))&&t.preventDefault()}),e.addEventListener("dblclick",t=>{(t.target instanceof HTMLDivElement&&t.target.closest(".touch-controls")||t.target===e.getElementById("canvas"))&&t.preventDefault()});e.querySelectorAll(".ui-grid__corner").forEach(e=>{e.querySelector(".ui-grid__corner--heading").addEventListener("click",e=>function(e){e.preventDefault(),e.stopPropagation();const t=e.currentTarget;if(t instanceof HTMLDivElement){const e=t.nextElementSibling;if(null!==e.getAttribute("hidden"))return void e.removeAttribute("hidden");e.setAttribute("hidden","hidden")}}(e))});e.getElementById("loadInput").addEventListener("change",async e=>{const t=e.target.files[0];if(!t)return;const n=await async function(e,t,n){const r=t.stream().pipeThrough(new e.DecompressionStream("gzip")),o=await new e.Response(r).text(),i=e.JSON.parse(o);return n.clear(),e.Object.entries(i).forEach(([t,r])=>{e.Object.entries(r).forEach(([r,o])=>{e.Object.entries(o).forEach(([e,o])=>{n.set(`${t},${e},${r}`,o)})})}),console.log("Save state loaded successfully"),n}(globalThis,t,o.world),{x:r,z:i,playerHeight:a}=o;let s=-1/0;for(let e=255;e>=-64;e--)if(me(n,r,e,i)){s=e;break}o.y=s+1+1.62,o.dy=0,alert(`Loaded ${n.chunks.size} chunks!`)});e.getElementById("saveWorld").addEventListener("click",async()=>{const e=function(e){const t={};return e.forEach((e,n)=>{const[r,o,i]=n.split(",").map(Number);t[r]||(t[r]={}),t[r][i]||(t[r][i]={}),t[r][i][o]=e}),t}(o.world),t=new globalThis.Blob([JSON.stringify(e)]).stream().pipeThrough(new globalThis.CompressionStream("gzip")),n=await new globalThis.Response(t).blob(),r=globalThis.document.createElement("a");r.href=globalThis.URL.createObjectURL(n),r.download="block-garden.json.gz",r.click(),URL.revokeObjectURL(r.href)});const u=e.getElementById("generateWorldButton");function d(){const{blocks:t,blockNames:n}=J,{world:r}=o,i=(a=n.GRASS,t.findIndex(e=>e.name===a));var a;const s=[];for(let e=-16;e<=16;e++)for(let t=-16;t<=16;t++)for(let n=1;n<=24;n++){const o=`${e},${n},${t}`;r.get(o)===i&&(Math.abs(e)>2||Math.abs(t)>2)&&s.push({x:e,y:n,z:t,key:o})}if(s.length>0){const e=new Set;t.forEach((t,n)=>{if(t.isSeed){let i=null,a=0;for(;a<100&&!i;){const t=s[Math.floor(Math.random()*s.length)];t&&!e.has(t.key)&&(i=t,e.add(t.key)),a++}i&&(r.set(i.key,n),o.plantStructures[i.key]={type:t.name,blocks:[i.key]},o.growthTimers[i.key]=t.growthTime||10)}})}o.fastGrowth&&e.dispatchEvent(new CustomEvent("block-garden-reset"))}u&&u.addEventListener("click",()=>{confirm("Are you sure you want to generate a new world?")&&(o.seed=Math.random(),function(e,t){const{blocks:n,blockNames:r}=e,{world:o}=t,i=t.seed||Math.random();_e(i);const a=e=>n.findIndex(t=>t.name===e),s=a(r.GRASS),c=a(r.DIRT),l=a(r.STONE),u=a(r.WATER),d=a(r.SAND),h=a(r.CLOUD),f=a(r.WOOD),p=a(r.TREE_LEAVES);o.clear(),t.plantStructures={},t.growthTimers={};let g=24;const m=[];for(let e=-16;e<=16;e++)for(let n=-16;n<=16;n++){const r=Le(e,n,i);let a=Math.floor((r+1)/2*12+2);Math.abs(e)<3&&Math.abs(n)<3&&(a=Math.max(a,5)),0===e&&0===n&&(g=a+2);for(let r=1;r<=24;r++){const g=`${e},${r},${n}`;1!==r?r<=a?r===a?r<5?o.set(g,d):(o.set(g,s),(Math.abs(e)>4||Math.abs(n)>4)&&Math.random()<.02&&e%3!=0&&n%3!=0&&xe(o,e,r+1,n,f,p),t.isPrePlanted&&(Math.abs(e)>2||Math.abs(n)>2)&&m.push({x:e,y:r,z:n,key:g})):r>a-3?o.set(g,c):o.set(g,l):r<=4?o.set(g,u):(Math.abs(e)>6||Math.abs(n)>6)&&r>=18&&r<=22&&Te(e,r,n,i,2,.5,.05)>.45&&o.set(g,h):o.set(g,u)}}if(t.isPrePlanted&&m.length>0){const e=new Set,r=t.fastGrowth,i=n.FAST_GROWTH_TIME||30;n.forEach((n,a)=>{if(n.isSeed){let s=null,c=0;for(;c<100&&!s;){const t=m[Math.floor(Math.random()*m.length)];t&&!e.has(t.key)&&(s=t,e.add(t.key)),c++}s&&(o.set(s.key,a),t.plantStructures[s.key]={type:n.name,blocks:[s.key]},t.growthTimers[s.key]=r?i:n.growthTime||10)}})}t.y=g+(1.62-t.playerHeight/2),t.x=0,t.z=0,t.dy=0,t.onGround=!1}(J,o),alert("New world generated!"))});const h=function(e,t){let n;return function(...r){clearTimeout(n),n=setTimeout(()=>e.apply(this,r),t)}}(()=>{ve(e,n)},200);new ResizeObserver(e=>{h()}).observe(e.host);const f=e.getElementById("toggleTouchControls");f&&(f.addEventListener("click",()=>{J.useTouchControls.set(!J.useTouchControls.get())}),ge(()=>{const e=J.useTouchControls.get();f.textContent=e?"Disable Touch Controls":"Enable Touch Controls",f.style.backgroundColor=e?"var(--bg-color-red-500)":"var(--bg-color-green-500)",f.style.color="var(--bg-color-white)"}))}function We(e,t,n,r){t.addEventListener("keydown",async t=>{const n=t.key.toLowerCase();if(e.host.keys[n]=!0,("`"===n||"~"===n)&&(t.preventDefault(),"Backquote"===t.code||"Accent"===t.code)){const e=J.blocks.length,n=!t.shiftKey?(r.get()+1)%e:(r.get()-1+e)%e;r.set(n)}}),t.addEventListener("click",()=>{t?.requestPointerLock()}),t.addEventListener("contextmenu",e=>{e.preventDefault()}),t.addEventListener("mousedown",e=>{if(Date.now()-Oe<1e3)return;const t=globalThis.blockGarden.state,r=t.hit;if(!r)return;const o=`${r.x},${r.y},${r.z}`,i=t.world;if(0===e.button&&r.face){const e=r.x+r.face.x,o=r.y+r.face.y,a=r.z+r.face.z;if(!de({minX:t.x-t.playerWidth/2,maxX:t.x+t.playerWidth/2,minY:t.y-t.playerHeight/2,maxY:t.y+t.playerHeight/2,minZ:t.z-t.playerWidth/2,maxZ:t.z+t.playerWidth/2},{minX:e,maxX:e+1,minY:o,maxY:o+1,minZ:a,maxZ:a+1})){const r=t.curBlock.get();i.set(`${e},${o},${a}`,r);const s=n[r];if(s&&s.isSeed){const n=`${e},${o},${a}`;t.growthTimers||(t.growthTimers={}),t.plantStructures||(t.plantStructures={});const r=s.growthTime||10;t.growthTimers[n]=r,t.plantStructures[n]={type:s.name,blocks:[]}}}}2===e.button&&i.delete(o)})}function Ge(e,t){ge(()=>{e.getElementById("blockName").textContent=t.get()}),ge(()=>{const t=e.querySelector(".touch-controls");t&&J.useTouchControls.get()?t.removeAttribute("hidden"):t.setAttribute("hidden","")})}function ze(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)||console.error(e.getShaderInfoLog(r)),r}function Me(e,t,n,r=3){const o=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,r,e.FLOAT,!1,0,0)}function Pe(e){const t=e.getContext("webgl2");if(!t)return void console.error("WebGL 2 not supported.");const n=function(e,t,n){const r=e.createProgram(),o=ze(e,e.VERTEX_SHADER,t),i=ze(e,e.FRAGMENT_SHADER,n);return e.attachShader(r,o),e.attachShader(r,i),e.linkProgram(r),e.useProgram(r),r}(t,"#version 300 es\n    layout(location=0)in vec3 p;\n    layout(location=1)in vec3 n;\n    layout(location=2)in vec4 c;\n    uniform mat4 MVP, M;\n    uniform vec3 L;\n    out vec4 C;\n    out float Lg;\n    void main(){\n      vec3 nn=normalize((M*vec4(n,0)).xyz);\n      float d=max(dot(nn,-L),0.);\n      Lg=.3+d*.7;C=c;\n      gl_Position=MVP*vec4(p,1);\n    }","#version 300 es\n    precision highp float;\n    in vec4 C;\n    in float Lg;\n    out vec4 o;\n    void main(){o=C*Lg;}\n  "),r=t.getUniformLocation(n,"MVP"),o=t.getUniformLocation(n,"M"),i=t.getUniformLocation(n,"L"),a=function(){const e=[],t=[],n=[[-.5,-.5,-.5],[.5,-.5,-.5],[.5,.5,-.5],[-.5,.5,-.5],[-.5,-.5,.5],[.5,-.5,.5],[.5,.5,.5],[-.5,.5,.5]],r=[[1,5,6,1,6,2],[4,0,3,4,3,7],[3,2,6,3,6,7],[4,5,1,4,1,0],[5,4,7,5,7,6],[0,1,2,0,2,3]];return[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]].forEach((o,i)=>r[i].forEach(r=>{e.push(...n[r]),t.push(...o)})),{p:new Float32Array(e),n:new Float32Array(t),cnt:e.length/3}}(),s=t.createVertexArray();t.bindVertexArray(s),Me(t,a.p,0),Me(t,a.n,1);const c=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,c),t.enableVertexAttribArray(2),t.vertexAttribPointer(2,4,t.FLOAT,!1,0,0),{gl:t,cbuf:c,cube:a,uL:i,uM:o,uMVP:r}}const De=()=>new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);const Ze=[{dir:[1,0,0],corners:[[1,0,0],[1,1,0],[1,1,1],[1,0,0],[1,1,1],[1,0,1]]},{dir:[-1,0,0],corners:[[0,0,1],[0,1,1],[0,1,0],[0,0,1],[0,1,0],[0,0,0]]},{dir:[0,1,0],corners:[[0,1,0],[0,1,1],[1,1,1],[0,1,0],[1,1,1],[1,1,0]]},{dir:[0,-1,0],corners:[[0,0,1],[0,0,0],[1,0,0],[0,0,1],[1,0,0],[1,0,1]]},{dir:[0,0,1],corners:[[0,0,1],[0,1,1],[1,1,1],[0,0,1],[1,1,1],[1,0,1]]},{dir:[0,0,-1],corners:[[1,0,0],[1,1,0],[0,1,0],[1,0,0],[0,1,0],[0,0,0]]}];function Ue(e,t){if(0===e)return!0;const n=t[e];return!n||n.color[3]<1}function Fe(e,t,n,r,o){if(r<=0)return 1;if(r>=q)return 0;if(n>=0&&n<K&&o>=0&&o<$)return e.getBlock(n,r,o);const i=e.worldX+n,a=e.worldZ+o;return t.getBlock(i,r,a)}function je(e,t,n){const r=[],o=[],i=[],a=e.worldX,s=e.worldZ;for(let c=1;c<q;c++)for(let l=0;l<$;l++)for(let u=0;u<K;u++){const d=e.getBlock(u,c,l);if(0===d)continue;const h=n[d];if(!h)continue;const[f,p,g,m]=h.color,v=m<1,b=a+u,y=s+l;for(const a of Ze){const[s,h,I]=a.dir,E=Fe(e,t,u+s,c+h,l+I),w=0===E,C=Ue(E,n);let A=!1;if((w||!v&&C||v&&E!==d)&&(A=!0),A)for(const e of a.corners)r.push(b+e[0],c+e[1],y+e[2]),o.push(s,h,I),i.push(f,p,g,m)}}return{positions:new Float32Array(r),normals:new Float32Array(o),colors:new Float32Array(i),vertexCount:r.length/3,positionBuffer:null,normalBuffer:null,colorBuffer:null}}function He(e,t){const n=t.mesh;n&&0!==n.vertexCount&&(n.positionBuffer||(n.positionBuffer=e.createBuffer()),e.bindBuffer(e.ARRAY_BUFFER,n.positionBuffer),e.bufferData(e.ARRAY_BUFFER,n.positions,e.STATIC_DRAW),n.normalBuffer||(n.normalBuffer=e.createBuffer()),e.bindBuffer(e.ARRAY_BUFFER,n.normalBuffer),e.bufferData(e.ARRAY_BUFFER,n.normals,e.STATIC_DRAW),n.colorBuffer||(n.colorBuffer=e.createBuffer()),e.bindBuffer(e.ARRAY_BUFFER,n.colorBuffer),e.bufferData(e.ARRAY_BUFFER,n.colors,e.STATIC_DRAW))}function Ye(e,t){const n=e.host;return!!(n&&"object"==typeof n&&"keys"in n&&"touchKeys"in n)&&(n.keys[t]||n.touchKeys[t])}function Ve(e,t,n){const{yaw:r,flying:o}=t,i=o?12:8,a=Math.sin(r),s=Math.cos(r);let c=0,l=0;Ye(e,"w")?(c+=a*i,l+=s*i):Ye(e,"a")?(c+=s*i,l-=a*i):Ye(e,"s")?(c-=a*i,l-=s*i):Ye(e,"d")?(c-=s*i,l+=a*i):Ye(e,"upleft")?(c+=(a+s)*i,l+=(s-a)*i):Ye(e,"upright")?(c+=(a-s)*i,l+=(s+a)*i):Ye(e,"downleft")?(c+=(-a+s)*i,l+=(-s-a)*i):Ye(e,"downright")&&(c+=(-a-s)*i,l+=(-s+a)*i),t.dx+=(c-t.dx)*(o?15:10)*n,t.dz+=(l-t.dz)*(o?15:10)*n;const u=o?.95:.92;t.dx*=u,t.dz*=u}function Xe(e,t,n,r,o){const i=r/2,a=o/2;return{minX:e-i,maxX:e+i,minY:t-a,maxY:t+a,minZ:n-i,maxZ:n+i}}function Je(e,t){const{world:n}=e,r=Math.floor(t.minX),o=Math.ceil(t.maxX),i=Math.floor(t.minY),a=Math.ceil(t.maxY),s=Math.floor(t.minZ),c=Math.ceil(t.maxZ);for(let e=i;e<a;e++)for(let i=r;i<o;i++)for(let r=s;r<c;r++)if(me(n,i,e,r)){if(de(t,{minX:i,minY:e,minZ:r,maxX:i+1,maxY:e+1,maxZ:r+1}))return!0}return!1}function Ke(e,t,n,r){let{x:o,y:i,z:a,dx:s,dy:c,dz:l,playerWidth:u,playerHeight:d,onGround:h,flying:f,flySpeed:p}=n;const g=Ye(e," "),m=performance.now();g&&!n.spacePressed&&(m-n.lastSpacePressTime<300?(f=!f,n.lastSpacePressTime=0):n.lastSpacePressTime=m),g&&!f&&h&&(c=12),n.spacePressed=g,f?((t.descendButton.hasAttribute("hidden")||t.flyButton.hasAttribute("hidden"))&&(t.descendButton.removeAttribute("hidden"),t.flyButton.removeAttribute("hidden")),c=Ye(e,"shift")?-p:g?p:0):(t.descendButton.hasAttribute("hidden")&&!t.flyButton.hasAttribute("hidden")||(t.descendButton.setAttribute("hidden","hidden"),t.flyButton.setAttribute("hidden","hidden")),c-=45*r);const v=o+s*r,b=i+c*r,y=a+l*r;let I=!1;return Je(n,Xe(v,b,y,u,d))?(Je(n,Xe(v,i,a,u,d))?n.dx=0:o=v,Je(n,Xe(o,b,a,u,d))?(c<0&&(I=!0),c=0):i=b,Je(n,Xe(o,i,y,u,d))?n.dz=0:a=y):(o=v,i=b,a=y),n.dx=s,n.dy=c,n.dz=l,n.onGround=I,n.flying=f,{x:o,y:i,z:a}}function qe(e){const{world:t}=e,n=[];for(const[e,r]of t.entries()){const o=X[r];if(o&&o.gravity){const[o,i,a]=e.split(",").map(Number);me(t,o,i-1,a)||n.push({from:e,to:{x:o,y:i-1,z:a},type:r})}}for(const e of n)t.delete(e.from),t.set(`${e.to.x},${e.to.y},${e.to.z}`,e.type)}const $e={[V.AGAVE]:function(e,t,n,r,o){const i=[],a=e=>o.findIndex(t=>t.name===e),s=a(V.AGAVE_GROWING),c=a(V.AGAVE_BASE),l=a(V.AGAVE_SPIKE),u=a(V.AGAVE_FLOWER_STALK),d=a(V.AGAVE_FLOWER);if(r<.2)return i.push({x:e,y:t,z:n,blockId:s}),i;if(i.push({x:e,y:t,z:n,blockId:c}),r>.4&&(r>.5&&i.push({x:e-1,y:t,z:n,blockId:l}),r>.55&&i.push({x:e+1,y:t,z:n,blockId:l}),r>.6&&i.push({x:e,y:t,z:n-1,blockId:l}),r>.65&&i.push({x:e,y:t,z:n+1,blockId:l})),r>.8){const o=3;for(let a=1;a<=o;a++)a===o&&r>.95?i.push({x:e,y:t+a,z:n,blockId:d}):i.push({x:e,y:t+a,z:n,blockId:u})}return i},[V.BAMBOO]:function(e,t,n,r,o){const i=[],a=e=>o.findIndex(t=>t.name===e),s=a(V.BAMBOO_GROWING),c=a(V.BAMBOO_STALK),l=a(V.BAMBOO_JOINT),u=a(V.BAMBOO_LEAVES);if(r<.1)return i.push({x:e,y:t,z:n,blockId:s}),i;const d=Math.floor(8*r);for(let r=0;r<d;r++){const o=r%3==2;i.push({x:e,y:t+r,z:n,blockId:o?l:c}),o&&r<d-1&&(i.push({x:e+1,y:t+r,z:n,blockId:u}),i.push({x:e-1,y:t+r,z:n,blockId:u}))}return i},[V.BERRY_BUSH]:function(e,t,n,r,o){const i=[],a=e=>o.findIndex(t=>t.name===e),s=a(V.BERRY_BUSH_GROWING),c=a(V.BERRY_BUSH_BRANCH),l=a(V.BERRY_BUSH_LEAVES),u=a(V.BERRY_BUSH_BERRIES);return r<.2?(i.push({x:e,y:t,z:n,blockId:s}),i):(i.push({x:e,y:t,z:n,blockId:c}),r>.4&&(i.push({x:e+1,y:t,z:n,blockId:l}),i.push({x:e-1,y:t,z:n,blockId:l}),i.push({x:e,y:t,z:n+1,blockId:l}),i.push({x:e,y:t,z:n-1,blockId:l}),i.push({x:e,y:t+1,z:n,blockId:l})),r>.8&&(i.push({x:e+1,y:t+1,z:n,blockId:u}),i.push({x:e-1,y:t+1,z:n,blockId:u}),i.push({x:e,y:t+1,z:n+1,blockId:u}),i.push({x:e,y:t+1,z:n-1,blockId:u})),i)},[V.BIRCH]:function(e,t,n,r,o){const i=[],a=e=>o.findIndex(t=>t.name===e),s=a(V.BIRCH_GROWING),c=a(V.BIRCH_TRUNK),l=a(V.BIRCH_LEAVES);if(a(V.BIRCH_BRANCHES),r<.1)return i.push({x:e,y:t,z:n,blockId:s}),i;const u=Math.floor(6*r);for(let r=0;r<u;r++)i.push({x:e,y:t+r,z:n,blockId:c});if(r>.5){for(let r=Math.max(2,u-3);r<u;r++)r%2==0&&(i.push({x:e+1,y:t+r,z:n,blockId:l}),i.push({x:e-1,y:t+r,z:n,blockId:l}),i.push({x:e,y:t+r,z:n+1,blockId:l}),i.push({x:e,y:t+r,z:n-1,blockId:l}));i.push({x:e,y:t+u,z:n,blockId:l})}return i},[V.CACTUS]:function(e,t,n,r,o){const i=[],a=e=>o.findIndex(t=>t.name===e),s=a(V.CACTUS_GROWING),c=a(V.CACTUS_BODY),l=a(V.CACTUS_FLOWER);if(r<.1)return i.push({x:e,y:t,z:n,blockId:s}),i;const u=Math.max(1,Math.floor(4*r));for(let r=0;r<u;r++)i.push({x:e,y:t+r,z:n,blockId:c});return r>.4&&u>2&&(i.push({x:e+1,y:t+1,z:n,blockId:c}),i.push({x:e+1,y:t+2,z:n,blockId:c})),r>.6&&u>2&&(i.push({x:e-1,y:t+2,z:n,blockId:c}),i.push({x:e-1,y:t+3,z:n,blockId:c})),r>.9&&(i.push({x:e,y:t+u,z:n,blockId:l}),r>.95&&(i.push({x:e+1,y:t+3,z:n,blockId:l}),i.push({x:e-1,y:t+4,z:n,blockId:l}))),i},[V.CARROT]:function(e,t,n,r,o){const i=[],a=e=>o.findIndex(t=>t.name===e),s=a(V.CARROT_GROWING),c=a(V.CARROT_LEAVES),l=a(V.CARROT_ROOT);return r<.3?(i.push({x:e,y:t,z:n,blockId:s}),i):(i.push({x:e,y:t,z:n,blockId:l}),r>.6&&i.push({x:e,y:t+1,z:n,blockId:c}),i)},[V.CORN]:function(e,t,n,r,o){const i=[],a=e=>o.findIndex(t=>t.name===e),s=a(V.CORN_GROWING),c=a(V.CORN_STALK),l=a(V.CORN_LEAVES),u=a(V.CORN_EAR),d=a(V.CORN_SILK);return r<.2?(i.push({x:e,y:t,z:n,blockId:s}),i):(i.push({x:e,y:t,z:n,blockId:c}),r>.4&&i.push({x:e,y:t+1,z:n,blockId:c}),r>.6&&(i.push({x:e+1,y:t,z:n,blockId:l}),i.push({x:e-1,y:t,z:n,blockId:l}),i.push({x:e+1,y:t+1,z:n,blockId:u})),r>.8&&i.push({x:e+1,y:t+2,z:n,blockId:d}),i)},[V.FERN]:function(e,t,n,r,o){const i=[],a=e=>o.findIndex(t=>t.name===e),s=a(V.FERN_GROWING),c=a(V.FERN_STEM),l=a(V.FERN_FROND);return r<.2?(i.push({x:e,y:t,z:n,blockId:s}),i):(i.push({x:e,y:t,z:n,blockId:c}),r>.5&&(i.push({x:e+1,y:t,z:n,blockId:l}),i.push({x:e-1,y:t,z:n,blockId:l}),i.push({x:e,y:t,z:n+1,blockId:l}),i.push({x:e,y:t,z:n-1,blockId:l})),r>.8&&i.push({x:e,y:t+1,z:n,blockId:l}),i)},[V.KELP]:function(e,t,n,r,o){const i=[],a=e=>o.findIndex(t=>t.name===e),s=a(V.KELP_GROWING),c=a(V.KELP_BLADE),l=a(V.KELP_BULB);if(r<.1)return i.push({x:e,y:t,z:n,blockId:s}),i;const u=Math.floor(10*r);for(let r=0;r<u;r++){const o=r===u-1||r%4==3?l:c;i.push({x:e,y:t+r,z:n,blockId:o})}return i},[V.LAVENDER]:function(e,t,n,r,o){const i=[],a=e=>o.findIndex(t=>t.name===e),s=a(V.LAVENDER_GROWING),c=a(V.LAVENDER_BUSH),l=a(V.LAVENDER_STEM),u=a(V.LAVENDER_FLOWERS);return r<.2?(i.push({x:e,y:t,z:n,blockId:s}),i):(i.push({x:e,y:t,z:n,blockId:c}),r>.4&&(i.push({x:e+1,y:t,z:n,blockId:c}),i.push({x:e-1,y:t,z:n,blockId:c}),i.push({x:e,y:t,z:n+1,blockId:c}),i.push({x:e,y:t,z:n-1,blockId:c})),r>.6&&(i.push({x:e,y:t+1,z:n,blockId:l}),i.push({x:e+1,y:t+1,z:n,blockId:l}),i.push({x:e-1,y:t+1,z:n,blockId:l}),i.push({x:e,y:t+1,z:n+1,blockId:l}),i.push({x:e,y:t+1,z:n-1,blockId:l})),r>.8&&(i.push({x:e,y:t+2,z:n,blockId:u}),i.push({x:e+1,y:t+2,z:n,blockId:u}),i.push({x:e-1,y:t+2,z:n,blockId:u}),i.push({x:e,y:t+2,z:n+1,blockId:u}),i.push({x:e,y:t+2,z:n-1,blockId:u})),i)},[V.LOTUS]:function(e,t,n,r,o){const i=[],a=e=>o.findIndex(t=>t.name===e),s=a(V.LOTUS_GROWING),c=a(V.LOTUS_PAD),l=a(V.LOTUS_STEM),u=a(V.LOTUS_BUD),d=a(V.LOTUS_FLOWER);if(r<.2)return i.push({x:e,y:t,z:n,blockId:s}),i;if(i.push({x:e,y:t,z:n,blockId:c}),r>.4&&(i.push({x:e+1,y:t,z:n,blockId:c}),i.push({x:e-1,y:t,z:n,blockId:c}),i.push({x:e,y:t,z:n+1,blockId:c}),i.push({x:e,y:t,z:n-1,blockId:c})),r>.7){i.push({x:e,y:t+1,z:n,blockId:l});const o=r>.9?d:u;i.push({x:e,y:t+2,z:n,blockId:o})}return i},[V.MUSHROOM]:function(e,t,n,r,o){const i=[],a=e=>o.findIndex(t=>t.name===e),s=a(V.MUSHROOM_GROWING),c=a(V.MUSHROOM_STEM),l=a(V.MUSHROOM_CAP);if(r<.2)return i.push({x:e,y:t,z:n,blockId:s}),i;const u=1+Math.floor(2*r);for(let r=0;r<u;r++)i.push({x:e,y:t+r,z:n,blockId:c});return r>.6&&(i.push({x:e,y:t+u,z:n,blockId:l}),i.push({x:e+1,y:t+u,z:n,blockId:l}),i.push({x:e-1,y:t+u,z:n,blockId:l}),i.push({x:e,y:t+u,z:n+1,blockId:l}),i.push({x:e,y:t+u,z:n-1,blockId:l}),r>.8&&(i.push({x:e+1,y:t+u-1,z:n,blockId:l}),i.push({x:e-1,y:t+u-1,z:n,blockId:l}),i.push({x:e,y:t+u-1,z:n+1,blockId:l}),i.push({x:e,y:t+u-1,z:n-1,blockId:l}))),i},[V.PINE_TREE]:function(e,t,n,r,o){const i=[],a=e=>o.findIndex(t=>t.name===e),s=a(V.PINE_TREE_GROWING),c=a(V.PINE_TRUNK),l=a(V.PINE_NEEDLES);if(r<.1)return i.push({x:e,y:t,z:n,blockId:s}),i;const u=Math.floor(7*r);for(let r=0;r<u;r++)i.push({x:e,y:t+r,z:n,blockId:c});if(r>.4){for(let r=3;r<u;r++){const o=Math.max(1,Math.floor((u-r)/2));o>=1&&(i.push({x:e+1,y:t+r,z:n,blockId:l}),i.push({x:e-1,y:t+r,z:n,blockId:l}),i.push({x:e,y:t+r,z:n+1,blockId:l}),i.push({x:e,y:t+r,z:n-1,blockId:l}),o>1&&(i.push({x:e+1,y:t+r,z:n+1,blockId:l}),i.push({x:e-1,y:t+r,z:n+1,blockId:l}),i.push({x:e+1,y:t+r,z:n-1,blockId:l}),i.push({x:e-1,y:t+r,z:n-1,blockId:l})))}i.push({x:e,y:t+u,z:n,blockId:l})}return i},[V.PUMPKIN]:function(e,t,n,r,o){const i=[],a=e=>o.findIndex(t=>t.name===e),s=a(V.PUMPKIN_GROWING),c=a(V.PUMPKIN_VINE),l=a(V.PUMPKIN_STEM),u=a(V.PUMPKIN_LEAVES),d=a(V.PUMPKIN_FRUIT);return r<.2?(i.push({x:e,y:t,z:n,blockId:s}),i):(i.push({x:e,y:t,z:n,blockId:l}),r>.4&&i.push({x:e+1,y:t,z:n,blockId:c}),r>.6&&i.push({x:e+1,y:t+1,z:n,blockId:u}),r>.8&&i.push({x:e+2,y:t,z:n,blockId:d}),i)},[V.ROSE]:function(e,t,n,r,o){const i=[],a=e=>o.findIndex(t=>t.name===e),s=a(V.ROSE_GROWING),c=a(V.ROSE_STEM),l=a(V.ROSE_THORNS),u=a(V.ROSE_LEAVES),d=a(V.ROSE_BUD),h=a(V.ROSE_BLOOM);if(r<.2)return i.push({x:e,y:t,z:n,blockId:s}),i;const f=1+Math.floor(2*r);for(let r=0;r<f;r++)i.push({x:e,y:t+r,z:n,blockId:0===r?l:c}),r>0&&r<f&&(r%2==1?i.push({x:e+1,y:t+r,z:n,blockId:u}):i.push({x:e-1,y:t+r,z:n,blockId:u}));if(r>.8){const o=r>.95?h:d;i.push({x:e,y:t+f,z:n,blockId:o})}return i},[V.SUNFLOWER]:function(e,t,n,r,o){const i=[],a=e=>o.findIndex(t=>t.name===e),s=a(V.SUNFLOWER_GROWING),c=a(V.SUNFLOWER_STEM),l=a(V.SUNFLOWER_LEAVES),u=a(V.SUNFLOWER_CENTER),d=a(V.SUNFLOWER_PETALS);if(r<.1)return i.push({x:e,y:t,z:n,blockId:s}),i;const h=Math.max(1,Math.ceil(5*r));for(let r=0;r<h;r++)i.push({x:e,y:t+r,z:n,blockId:c});if(r>.3){const r=2;for(let o=r;o<h;o+=r){const a=o/r%4;0===a&&i.push({x:e-1,y:t+o,z:n,blockId:l}),1===a&&i.push({x:e,y:t+o,z:n-1,blockId:l}),2===a&&i.push({x:e+1,y:t+o,z:n,blockId:l}),3===a&&i.push({x:e,y:t+o,z:n+1,blockId:l})}}if(r>.7){const o=t+h-1;i.push({x:e,y:o,z:n,blockId:u}),r>.85&&(i.push({x:e-1,y:o,z:n,blockId:d}),i.push({x:e+1,y:o,z:n,blockId:d}),i.push({x:e,y:o,z:n-1,blockId:d}),i.push({x:e,y:o,z:n+1,blockId:d}))}return i},[V.TULIP]:function(e,t,n,r,o){const i=[],a=e=>o.findIndex(t=>t.name===e),s=a(V.TULIP_GROWING),c=a(V.TULIP_BULB),l=a(V.TULIP_STEM),u=a(V.TULIP_LEAVES),d=a(V.TULIP_PETALS);return r<.2?(i.push({x:e,y:t,z:n,blockId:s}),i):(i.push({x:e,y:t,z:n,blockId:c}),r>.4&&i.push({x:e,y:t+1,z:n,blockId:l}),r>.6&&(i.push({x:e+1,y:t+1,z:n,blockId:u}),i.push({x:e-1,y:t+1,z:n,blockId:u})),r>.8&&i.push({x:e,y:t+2,z:n,blockId:d}),i)},[V.WHEAT]:function(e,t,n,r,o){const i=[],a=e=>o.findIndex(t=>t.name===e),s=a(V.WHEAT_GROWING),c=a(V.WHEAT_STALK),l=a(V.WHEAT_GRAIN);return r<.2?(i.push({x:e,y:t,z:n,blockId:s}),i):(i.push({x:e,y:t,z:n,blockId:c}),r>.5&&i.push({x:e,y:t+1,z:n,blockId:c}),r>.8&&i.push({x:e,y:t+2,z:n,blockId:l}),i)},[V.WILLOW_TREE]:function(e,t,n,r,o){const i=[],a=e=>o.findIndex(t=>t.name===e),s=a(V.WILLOW_TREE_GROWING),c=a(V.WILLOW_TRUNK),l=a(V.WILLOW_BRANCHES),u=a(V.WILLOW_LEAVES);if(r<.1)return i.push({x:e,y:t,z:n,blockId:s}),i;const d=Math.floor(5*r);for(let r=0;r<d;r++)i.push({x:e,y:t+r,z:n,blockId:c});if(r>.6){const o=t+d;i.push({x:e+1,y:o,z:n,blockId:l}),i.push({x:e-1,y:o,z:n,blockId:l}),i.push({x:e,y:o,z:n+1,blockId:l}),i.push({x:e,y:o,z:n-1,blockId:l}),r>.8&&(i.push({x:e+1,y:o-1,z:n,blockId:u}),i.push({x:e-1,y:o-1,z:n,blockId:u}),i.push({x:e,y:o-1,z:n+1,blockId:u}),i.push({x:e,y:o-1,z:n-1,blockId:u}),r>.9&&d>3&&(i.push({x:e+2,y:o-1,z:n,blockId:u}),i.push({x:e-2,y:o-1,z:n,blockId:u}),i.push({x:e+2,y:o-2,z:n,blockId:u}),i.push({x:e-2,y:o-2,z:n,blockId:u})))}return i}};function Qe(e){if(!e.growthTimers||!e.plantStructures)return;const t=e.fastGrowth;for(const[n,r]of Object.entries(e.growthTimers)){const o=r-.02,i=e.plantStructures[n];if(o<=0)i&&$e[i.type]&&et(e,n,1,i.type),delete e.growthTimers[n];else if(e.growthTimers[n]=o,i&&$e[i.type]){const r=X.find(e=>e.name===i.type);et(e,n,1-o/(t?30:r?.growthTime||10),i.type)}}}function et(e,t,n,r){const o=e.plantStructures[t];if(!o)return;const[i,a,s]=t.split(",").map(Number);if(o.blocks)for(const t of o.blocks){const n=`${t.x},${t.y},${t.z}`;e.world.get(n)===t.blockId&&e.world.delete(n)}let c=[];const l=$e[r];l&&(c=l(i,a,s,n,X));for(const t of c){const n=`${t.x},${t.y},${t.z}`;e.world.set(n,t.blockId)}o.blocks=c}let tt,nt=performance.now(),rt=0;const ot={x:0,y:0,z:0};let it=!0;const at=(e,t,n)=>e+(t-e)*n;function st(e,t,n,r,o){const i=t.mesh;if(!i||0===i.vertexCount)return;e.bindBuffer(e.ARRAY_BUFFER,i.positionBuffer),e.enableVertexAttribArray(0),e.vertexAttribPointer(0,3,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,i.normalBuffer),e.enableVertexAttribArray(1),e.vertexAttribPointer(1,3,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,i.colorBuffer),e.enableVertexAttribArray(2),e.vertexAttribPointer(2,4,e.FLOAT,!1,0,0);const a=De();e.uniformMatrix4fv(r,!1,n),e.uniformMatrix4fv(o,!1,a),e.drawArrays(e.TRIANGLES,0,i.vertexCount)}function ct(e,t,n,r,o,i,a,s,c,l,u){void 0===n.gameTime&&(n.gameTime=0),it&&(ot.x=n.x,ot.y=n.y,ot.z=n.z,it=!1);const{pitch:d,yaw:h,world:f}=n,p=performance.now(),g=Math.min(p-nt,250);nt=p,rt+=g;let m=0;const v=.02;for(;rt>=20&&m<20;){ot.x=n.x,ot.y=n.y,ot.z=n.z,qe(n),Ve(e,n,v);const t=Ke(e,o,n,v);Qe(n),n.x=t.x,n.y=t.y,n.z=t.z,n.gameTime+=v,rt-=20,m++}const b=rt/20,y=at(ot.x,n.x,b),I=at(ot.y,n.y,b),E=at(ot.z,n.z,b),w=I-n.playerHeight/2+1.62;n.hit=function(e,{x:t,y:n,z:r},{yaw:o,pitch:i}){const a=Math,s=a.sin(o)*a.cos(i),c=a.sin(i),l=a.cos(o)*a.cos(i);let u=a.floor(t),d=a.floor(n),h=a.floor(r);const f=s>0?1:-1,p=c>0?1:-1,g=l>0?1:-1;let m,v,b,y,I,E;0!==s?(y=f/s,m=(f>0?u+1-t:t-u)/a.abs(s)):(y=1/0,m=1/0);0!==c?(I=p/c,v=(p>0?d+1-n:n-d)/a.abs(c)):(I=1/0,v=1/0);0!==l?(E=g/l,b=(g>0?h+1-r:r-h)/a.abs(l)):(E=1/0,b=1/0);let w=0,C=0,A=0,k=0;for(;w<16;){const t=`${u},${d},${h}`;if(e.has(t))return{x:u,y:d,z:h,face:{x:C,y:A,z:k}};m<v?m<b?(u+=f,w=m,m+=y,C=-f,A=0,k=0):(h+=g,w=b,b+=E,C=0,A=0,k=-g):v<b?(d+=p,w=v,v+=I,C=0,A=-p,k=0):(h+=g,w=b,b+=E,C=0,A=0,k=-g)}return null}(f,{x:y,y:w,z:E},{yaw:h,pitch:d}),i.viewport(0,0,t.width,t.height),i.enable(i.DEPTH_TEST),i.clearColor(.5,.8,1,1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT);const C=Math.sin(h),A=Math.cos(h),k=Math.cos(d),R=t.clientWidth/t.clientHeight,S=((e,t,n,r,o)=>{const i=1/Math.tan(t/2),a=1/(r-o);return e.set([i/n,0,0,0,0,i,0,0,0,0,(o+r)*a,-1,0,0,2*o*r*a,0]),e})(De(),Math.PI/3,R,.1,100),_=((e,t,n,r)=>{let o=t[0]-n[0],i=t[1]-n[1],a=t[2]-n[2],s=Math.hypot(o,i,a);o/=s,i/=s,a/=s;let c=r[1]*a-r[2]*i,l=r[2]*o-r[0]*a,u=r[0]*i-r[1]*o;s=Math.hypot(c,l,u),c/=s,l/=s,u/=s;let d=i*u-a*l,h=a*c-o*u,f=o*l-i*c;return e.set([c,d,o,0,l,h,i,0,u,f,a,0,-(c*t[0]+l*t[1]+u*t[2]),-(d*t[0]+h*t[1]+f*t[2]),-(o*t[0]+i*t[1]+a*t[2]),1]),e})(De(),[y,w,E],[y+C*k,w+Math.sin(d),E+A*k],[0,1,0]),T=((e,t,n)=>{for(let r=0;r<16;r++){const o=r>>2<<2,i=3&r;e[r]=n[o]*t[i]+n[o+1]*t[i+4]+n[o+2]*t[i+8]+n[o+3]*t[i+12]}return e})(De(),S,_);i.uniform3f(c,-.5,-1,-.3);const L=f.getVisibleChunks(y,E);for(const e of L)e.dirty&&(e.mesh=je(e,f,X),e.dirty=!1,He(i,e)),e.mesh&&e.mesh.vertexCount>0&&st(i,e,T,u,l);!function(e,t){e.disable(e.DEPTH_TEST);const n=t.width/2,r=t.height/2;e.enable(e.SCISSOR_TEST),e.clearColor(1,1,1,.8),e.scissor(n-10,r-1,20,2),e.clear(e.COLOR_BUFFER_BIT),e.scissor(n-1,r-10,2,20),e.clear(e.COLOR_BUFFER_BIT),e.disable(e.SCISSOR_TEST),e.enable(e.DEPTH_TEST)}(i,t),tt=requestAnimationFrame(()=>ct(e,t,n,r,o,i,a,s,c,l,u))}async function lt(e,t,n){if(tt&&cancelAnimationFrame(tt),t.dispatchEvent(new CustomEvent("block-garden-load",{detail:{isLoading:!0,error:null},bubbles:!0,composed:!0})),!n){const e="HTML canvas is required to init Block Garden.";return console.error(e),void t.dispatchEvent(new CustomEvent("block-garden-load",{detail:{isLoading:!1,error:e},bubbles:!0,composed:!0}))}t.addEventListener("focusout",e=>{n.focus()}),n.focus();let r={},o="1";try{r=await(await fetch("data:text/html;base64,ewogICJuYW1lIjogImJsb2NrLWdhcmRlbiIsCiAgInZlcnNpb24iOiAiMS4wLjAiLAogICJkZXNjcmlwdGlvbiI6ICJCbG9jayBHYXJkZW4gLSBBIDNEIHNhbmRib3ggZXhwbG9yYXRpb24gYW5kIGZhcm1pbmcgZ2FtZS4gRXhwbG9yZSBwcm9jZWR1cmFsbHkgZ2VuZXJhdGVkIHdvcmxkcywgZGlnIGZvciByZXNvdXJjZXMsIGFuZCBjdWx0aXZhdGUgYSB2YXJpZXR5IG9mIHBsYW50cy4iLAogICJob21lcGFnZSI6ICJodHRwczovL2dpdGh1Yi5jb20va2hlcnJpY2svYmxvY2stZ2FyZGVuLyNibG9jay1nYXJkZW4iLAogICJsaWNlbnNlIjogIkFHUEwtMy4wIiwKICAiYXV0aG9yIjogIkthcmwgSGVycmljayA8bWVAa2FybGhlcnJpY2suY29tPiIsCiAgInR5cGUiOiAibW9kdWxlIiwKICAibWFpbiI6ICJiaW4vc2VydmUubWpzIiwKICAibW9kdWxlIjogImluZGV4Lm1qcyIsCiAgImV4cG9ydHMiOiB7CiAgICAiLiI6IHsKICAgICAgImltcG9ydCI6ICIuL2Jsb2NrLWdhcmRlbi1idW5kbGUtbWluLm1qcyIKICAgIH0KICB9LAogICJzY3JpcHRzIjogewogICAgImJ1aWxkOmJhc2U6aW5kZXg6dW5idW5kbGVkIjogImJpbi9idWlsZC1odG1sLm1qcyBkaXN0L2luZGV4X3VuYnVuZGxlZC5odG1sIGJhc2UgaHJlZiAvYmxvY2stZ2FyZGVuLyIsCiAgICAiYnVpbGQ6YmFzZTppbmRleCI6ICJiaW4vYnVpbGQtaHRtbC5tanMgZGlzdC9pbmRleC5odG1sIGJhc2UgaHJlZiAvYmxvY2stZ2FyZGVuLyIsCiAgICAiYnVpbGQ6YmFzZTpwcml2YWN5IjogImJpbi9idWlsZC1odG1sLm1qcyBkaXN0L3ByaXZhY3kvaW5kZXguaHRtbCBiYXNlIGhyZWYgL2Jsb2NrLWdhcmRlbi8iLAogICAgImJ1aWxkOmNpIjogIm5weCBjb25jdXJyZW50bHkgLS1raWxsLW90aGVycyAtLXN1Y2Nlc3MgZmlyc3QgXCJucG0gcnVuIGJ1aWxkIHNpbmdsZVwiIFwibnBtIHJ1biBzdGFydDpkZXZcIiIsCiAgICAiYnVpbGQ6Z2gtcGFnZXM6bm9qZWt5bGwiOiAibm9kZSBiaW4vdG91Y2gtbm9qZWt5bGwubWpzIiwKICAgICJidWlsZDpwa2c6Z2V0Om1ldGEiOiAiZ2l0IHJldi1wYXJzZSBIRUFEIiwKICAgICJidWlsZDpwa2c6bWV0YSI6ICJub2RlIC1lIFwiaW1wb3J0IGZzIGZyb20gJ25vZGU6ZnMvcHJvbWlzZXMnOyBpbXBvcnQgcGtnIGZyb20gJy4vcGFja2FnZS5qc29uJyB3aXRoIHsgdHlwZTogJ2pzb24nIH07IChhc3luYyAoKSA9PiB7IGNvbnN0IG1ldGEgPSBwcm9jZXNzLmFyZ3ZbMV07IHBrZ1snYmxvY2stZ2FyZGVuJ10gPSB7IG1ldGEgfTsgYXdhaXQgZnMud3JpdGVGaWxlKCdkaXN0L3BhY2thZ2UuanNvbicsIEpTT04uc3RyaW5naWZ5KHBrZywgbnVsbCwgMikpOyB9KSgpXCIiLAogICAgImJ1aWxkOnNjcmlwdDppbmRleCI6ICJiaW4vYnVpbGQtaHRtbC5tanMgZGlzdC9pbmRleC5odG1sIHNjcmlwdCBzcmMgYmxvY2stZ2FyZGVuLWJ1bmRsZS1taW4ubWpzIiwKICAgICJidWlsZDpzZXJ2aWNlLXdvcmtlciI6ICJjZCBkaXN0ICYmIHdvcmtib3ggZ2VuZXJhdGVTVyBzZXJ2aWNlLXdvcmtlci93b3JrYm94LWNvbmZpZy5janMiLAogICAgImJ1aWxkOnNpbmdsZTpidW5kbGU6Y2xlYW4iOiAiZ2l0IGNoZWNrb3V0IEhFQUQgLS0gc3JjIiwKICAgICJidWlsZDpzaW5nbGU6YnVuZGxlIjogImJpbi9iYXNlNjQtZW5jb2RlLWJ1bmRsZS1yZXF1ZXN0cy5zaCIsCiAgICAiYnVpbGQ6c2luZ2xlOmluZGV4OmNsZWFuIjogImdpdCBjaGVja291dCBIRUFEIC0tIGluZGV4Lmh0bWwiLAogICAgImJ1aWxkOnNpbmdsZTppbmRleCI6ICJiaW4vYmFzZTY0LWVuY29kZS1pbmRleC1yZXF1ZXN0cy5zaCIsCiAgICAiYnVpbGQ6emlwIjogImdpdCBhcmNoaXZlIC0tZm9ybWF0IHppcCAtLW91dHB1dCBcImJsb2NrLWdhcmRlbi1idWlsZC0kKG5wbSBydW4gLXMgYnVpbGQ6cGtnOmdldDptZXRhKS56aXBcIiBIRUFEIiwKICAgICJidWlsZCI6ICJiYXNoIGJpbi9idWlsZC5zaCIsCiAgICAiYnVuZGxlIjogInJvbGx1cCAtYyIsCiAgICAiY2xlYW46c2VydmljZS13b3JrZXIiOiAibm9kZSBiaW4vcmltcmFmLm1qcyBkaXN0L3NlcnZpY2Utd29ya2VyLyouY2pzIiwKICAgICJjbGVhbiI6ICJub2RlIGJpbi9yaW1yYWYubWpzIGRpc3QiLAogICAgImNvcHk6NDA0IjogIm5vZGUgYmluL25jcC5tanMgNDA0Lmh0bWwgZGlzdC80MDQuaHRtbCIsCiAgICAiY29weTpkZXBzIjogIm5vZGUgYmluL25jcC5tanMgZGVwcyBkaXN0L2RlcHMiLAogICAgImNvcHk6aW5kZXg6YXNzZXRzIjogIm5vZGUgYmluL25jcC5tanMgYXNzZXRzIGRpc3QvYXNzZXRzIiwKICAgICJjb3B5OmluZGV4OmxpY2Vuc2UiOiAibm9kZSBiaW4vbmNwLm1qcyBMSUNFTlNFIGRpc3QvTElDRU5TRSIsCiAgICAiY29weTppbmRleDpsbG1zIjogIm5vZGUgYmluL25jcC5tanMgbGxtcy50eHQgZGlzdC9sbG1zLnR4dCIsCiAgICAiY29weTppbmRleDptYW5pZmVzdCI6ICJub2RlIGJpbi9uY3AubWpzIG1hbmlmZXN0Lmpzb24gZGlzdC9tYW5pZmVzdC5qc29uIiwKICAgICJjb3B5OmluZGV4OnJlYWRtZSI6ICJub2RlIGJpbi9uY3AubWpzIFJFQURNRS5tZCBkaXN0L1JFQURNRS5tZCIsCiAgICAiY29weTppbmRleDpyb2JvdHMiOiAibm9kZSBiaW4vbmNwLm1qcyByb2JvdHMudHh0IGRpc3Qvcm9ib3RzLnR4dCIsCiAgICAiY29weTppbmRleDpzaXRlbWFwIjogIm5vZGUgYmluL25jcC5tanMgc2l0ZW1hcC50eHQgZGlzdC9zaXRlbWFwLnR4dCIsCiAgICAiY29weTppbmRleDp1bmJ1bmRsZWQiOiAibm9kZSBiaW4vbmNwLm1qcyBpbmRleC5odG1sIGRpc3QvaW5kZXhfdW5idW5kbGVkLmh0bWwiLAogICAgImNvcHk6aW5kZXgiOiAibm9kZSBiaW4vbmNwLm1qcyBpbmRleC5odG1sIGRpc3QvaW5kZXguaHRtbCIsCiAgICAiY29weTpwa2ciOiAibm9kZSBiaW4vbmNwLm1qcyBwYWNrYWdlLmpzb24gZGlzdC9wYWNrYWdlLmpzb24iLAogICAgImNvcHk6cHJpdmFjeSI6ICJub2RlIGJpbi9uY3AubWpzIHByaXZhY3kvaW5kZXguaHRtbCBkaXN0L3ByaXZhY3kvaW5kZXguaHRtbCIsCiAgICAiY29weTpzZXJ2aWNlLXdvcmtlciI6ICJub2RlIGJpbi9uY3AubWpzIHNlcnZpY2Utd29ya2VyL3dvcmtib3gtY29uZmlnLmNqcyBkaXN0L3NlcnZpY2Utd29ya2VyL3dvcmtib3gtY29uZmlnLmNqcyIsCiAgICAiY29weTpzcmM6aW5kZXgiOiAibm9kZSBiaW4vbmNwLm1qcyBpbmRleC5tanMgZGlzdC9pbmRleC5tanMiLAogICAgImNvcHk6c3JjIjogIm5vZGUgYmluL25jcC5tanMgc3JjIGRpc3Qvc3JjIiwKICAgICJkZXBsb3k6Z2gtcGFnZXMiOiAiZ2gtcGFnZXMgLS1uby1oaXN0b3J5IC0tZG90ZmlsZXMgLS1kaXN0IGRpc3QgLS1yZXBvIGdpdEBnaXRodWIuY29tOmtoZXJyaWNrL2Jsb2NrLWdhcmRlbi5naXQgLS1yZW1vdGUgdXBzdHJlYW0iLAogICAgImZvcm1hdCI6ICJwcmV0dGllciAqKi8qLntodG1sLGNzcyxqcyxtanN9IC0td3JpdGUiLAogICAgIm1pbmlmeTo0MDQiOiAicG9zdGh0bWwgZGlzdC80MDQuaHRtbCAtdSBodG1sbmFubyIsCiAgICAibWluaWZ5OmluZGV4IjogInBvc3RodG1sIGRpc3QvaW5kZXguaHRtbCAtdSBodG1sbmFubyIsCiAgICAibWluaWZ5OnByaXZhY3kiOiAicG9zdGh0bWwgZGlzdC9wcml2YWN5LyouaHRtbCAtdSBodG1sbmFubyIsCiAgICAic3RhcnQ6ZGV2IjogIm5wbSBzdGFydCA4MDgwIiwKICAgICJzdGFydCI6ICJub2RlIGJpbi9zZXJ2ZS5tanMiLAogICAgInRlc3QiOiAiTk9ERV9PUFRJT05TPS0tZXhwZXJpbWVudGFsLXZtLW1vZHVsZXMgamVzdCIKICB9LAogICJkZXZEZXBlbmRlbmNpZXMiOiB7CiAgICAiQHBsYXl3cmlnaHQvdGVzdCI6ICJeMS41Ni4xIiwKICAgICJAcm9sbHVwL3BsdWdpbi1jb21tb25qcyI6ICJeMjkuMC4wIiwKICAgICJAcm9sbHVwL3BsdWdpbi1ub2RlLXJlc29sdmUiOiAiXjE2LjAuMyIsCiAgICAiQHJvbGx1cC9wbHVnaW4tdGVyc2VyIjogIl4wLjQuNCIsCiAgICAiQHJvbGx1cC9wbHVnaW4tdHlwZXNjcmlwdCI6ICJeMTIuMy4wIiwKICAgICJAeG1sZG9tL3htbGRvbSI6ICJeMC44LjExIiwKICAgICJiYXNlbGluZS1icm93c2VyLW1hcHBpbmciOiAiXjIuOS43IiwKICAgICJjb21wcmVzc2lvbiI6ICJeMS44LjEiLAogICAgImNvcnMiOiAiXjIuOC41IiwKICAgICJjc3NuYW5vIjogIl43LjEuMiIsCiAgICAiZXhwcmVzcyI6ICJeNS4xLjAiLAogICAgImV4cHJlc3MtdXJscmV3cml0ZSI6ICJeMi4wLjMiLAogICAgImdoLXBhZ2VzIjogIl42LjMuMCIsCiAgICAiaHRtbG5hbm8iOiAiXjIuMS41IiwKICAgICJqZXN0IjogIl4zMC4yLjAiLAogICAgImplc3QtZW52aXJvbm1lbnQtanNkb20iOiAiXjMwLjIuMCIsCiAgICAicG9zdGNzcyI6ICJeOC41LjYiLAogICAgInBvc3Rjc3MtY2xpIjogIl4xMS4wLjEiLAogICAgInBvc3RodG1sLWNsaSI6ICJeMC4xMC4wIiwKICAgICJwcmV0dGllciI6ICJeMy42LjIiLAogICAgInJvbGx1cCI6ICJeMi43OS4yIiwKICAgICJzdmdvIjogIl4zLjMuMiIsCiAgICAidGNwLXBvcnQtdXNlZCI6ICJeMS4wLjIiLAogICAgInR5cGVzY3JpcHQiOiAiXjUuOS4zIiwKICAgICJ3b3JrYm94LWNsaSI6ICJeNy4zLjAiCiAgfSwKICAiZGVwZW5kZW5jaWVzIjogewogICAgImFsZWEiOiAiXjEuMC4xIiwKICAgICJoYW1tZXJqcyI6ICJeMi4wLjgiLAogICAgImxvY2FsZm9yYWdlIjogIl4xLjEwLjAiLAogICAgInNpZ25hbC1wb2x5ZmlsbCI6ICJeMC4yLjIiLAogICAgInNpbXBsZXgtbm9pc2UiOiAiXjQuMC4zIiwKICAgICJ3b3JrYm94LXdpbmRvdyI6ICJeNy40LjAiCiAgfQp9")).json(),o=r.version}catch(e){console.log(`continuing with static version: ${o}`)}const{computedSignals:i,gameConfig:a,gameState:s}=await le(e,o);!function(e,t){const{blocks:n,blockNames:r}=e,{world:o}=t,i=e=>n.findIndex(t=>t.name===e),a=i(r.GRASS),s=i(r.DIRT);o.clear();for(let e=-16;e<=16;e++)for(let t=-16;t<=16;t++)o.set(`${e},1,${t}`,s),o.set(`${e},2,${t}`,a);t.y=4,t.x=0,t.z=0,t.dy=0,t.onGround=!1}(a,s);const c=t.host;c.keys={},c.touchKeys={},ue(t),function(e,t,n){const r=e.get("pan"),o=e.get("press"),i=e.get("tap");r.set({direction:l.DIRECTION_ALL,threshold:10}),o.set({time:500}).recognizeWith(r),i.set({interval:150,threshold:5}),i.requireFailure(o),i.requireFailure(r);let a=0,s=0;const c=e=>{const n=t.elementFromPoint(e.center.x,e.center.y);return!!n&&(null!==n.closest(".ui-grid__corner")||null!==n.closest(".touch-btn"))};e.on("panstart",e=>{c(e)||(a=0,s=0)}),e.on("panmove",e=>{if(c(e))return;const t=e.deltaX-a,r=e.deltaY-s;a=e.deltaX,s=e.deltaY,n.yaw-=.005*t;const o=Math.PI/2-.01;n.pitch=Math.max(-o,Math.min(o,n.pitch-.005*r))}),e.on("panend",()=>{a=0,s=0}),e.on("tap",e=>{if(c(e))return;if(e.srcEvent&&e.srcEvent.cancelable&&e.srcEvent.preventDefault(),"mouse"===e.pointerType)return;if(n.uiButtonActive)return;const t=n.hit;if(t&&t.face){const e=t.x+t.face.x,r=t.y+t.face.y,o=t.z+t.face.z;if(!de({minX:n.x-n.playerWidth/2,maxX:n.x+n.playerWidth/2,minY:n.y-n.playerHeight/2,maxY:n.y+n.playerHeight/2,minZ:n.z-n.playerWidth/2,maxZ:n.z+n.playerWidth/2},{minX:e,maxX:e+1,minY:r,maxY:r+1,minZ:o,maxZ:o+1})){const t=n.curBlock.get();n.world.set(`${e},${r},${o}`,t);const i=X[t];if(i&&i.isSeed){n.growthTimers||(n.growthTimers={}),n.plantStructures||(n.plantStructures={});const t=`${e},${r},${o}`,a=i.growthTime||10;n.growthTimers[t]=a,n.plantStructures[t]={type:i.name,blocks:[]}}}}});let u=null;const d=()=>{u&&(clearInterval(u),u=null)};e.on("press",e=>{if(c(e))return;const t=n.hit;t&&n.world.delete(`${t.x},${t.y},${t.z}`),d(),u=setInterval(()=>{const e=n.hit;e&&n.world.delete(`${e.x},${e.y},${e.z}`)},500)}),e.on("pressup",d),e.on("panend",d)}(l(t.host),t,s),Ge(t,i.currentBlock),Be(t,n,a.currentResolution),We(t,n,a.blocks,s.curBlock);const{gl:u,cbuf:d,cube:h,uL:f,uM:g,uMVP:m}=Pe(n),v={descendButton:t.getElementById("descend"),flyButton:t.getElementById("fly")};var b;s.curBlock.set((b="Dirt",X.findIndex(e=>e.name===b)));const y=await p.setItem("block-garden-version",o);console.log(`Block Garden version: ${y}`),t.addEventListener("block-garden-reset",()=>{const{blocks:e}=a,{growthTimers:r,plantStructures:o}=s,i=e.FAST_GROWTH_TIME||30;Object.keys(r).forEach(t=>{if(s.fastGrowth)r[t]=i;else{const n=o[t]?.type,i=e.find(e=>e.name===n);r[t]=i?.growthTime||10}}),ct(t,n,s,a,v,u,d,h,f,g,m),s.shouldReset.set(!0)}),ct(t,n,s,a,v,u,d,h,f,g,m),t.dispatchEvent(new CustomEvent("block-garden-load",{detail:{isLoading:!1,pkg:r,error:null},bubbles:!0,composed:!0}))}const ut="block-garden-select";class dt extends HTMLElement{#e;#t;#n;#r;#o;#i=[];constructor(){super();const e=globalThis.document.createElement("template");e.innerHTML='\n      <style>\n        [hidden] {\n          display: none !important;\n        }\n\n        .block-garden-select {\n          align-items: center;\n          background: var(--bg-color-green-500);\n          border-radius: 0.25rem;\n          border: none;\n          color: var(--bg-color-white);\n          cursor: pointer;\n          display: flex;\n          font-size: 0.625rem;\n          justify-content: space-between;\n          min-height: 2.125rem;\n          padding: 0.375rem 0.75rem;\n          text-align: center;\n          transition: all 0.2s;\n          user-select: none;\n          width: 100%;\n          box-sizing: border-box;\n          overflow: hidden;\n        }\n\n        .block-garden-select > * {\n          flex-shrink: 0;\n        }\n\n        .selected-text {\n          flex: 1;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n        }\n\n        .block-garden-select:hover {\n          background: var(--bg-color-green-600);\n        }\n\n        .block-garden-select:focus {\n          outline-offset: -0.125rem;\n          outline: 0.125rem solid var(--bg-color-green-500);\n        }\n\n        .block-garden-select[aria-expanded="true"] {\n          border-radius: 0.25rem 0.25rem 0 0;\n        }\n\n        .chevron {\n          flex-shrink: 0;\n          font-size: 0.75rem;\n          margin-left: 0.25rem;\n          padding-left: 0.25rem;\n          transition: transform 0.2s;\n        }\n\n        .block-garden-select[aria-expanded="true"] .chevron {\n          transform: rotate(180deg);\n        }\n\n        .placeholder {\n          opacity: 0.8;\n        }\n\n        .select-list {\n          background: var(--bg-color-gray-900);\n          border-radius: 0 0 0.25rem 0.25rem;\n          border-top: none;\n          border: 0.0625rem solid var(--bg-color-neutral-950);\n          left: 0;\n          list-style: none;\n          margin: 0;\n          max-height: 12rem;\n          overflow-y: auto;\n          padding: 0;\n          position: absolute;\n          right: 0;\n          top: 100%;\n          z-index: 1000;\n        }\n\n        .select-list[hidden] {\n          display: none;\n        }\n\n        .select-item {\n          border-bottom: 1px solid rgba(255,255,255,0.05);\n          color: var(--bg-color-white);\n          cursor: pointer;\n          font-size: 0.625rem;\n          padding: 0.375rem 0.75rem;\n          transition: all 0.2s;\n        }\n\n        .select-item:last-child {\n          border-bottom: none;\n        }\n\n        .select-item:hover,\n        .select-item:focus,\n        .select-item[aria-selected="true"] {\n          background: var(--bg-color-green-500);\n          outline: none;\n        }\n\n        .select-item:focus {\n          outline: 2px solid var(--bg-color-green-500);\n          outline-offset: -2px;\n        }\n\n        /* scrollbar */\n        .select-list {\n          scrollbar-color: var(--bg-color-gray-700) var(--bg-color-gray-900);\n          scrollbar-width: thin;\n        }\n\n        .select-list::-webkit-scrollbar {\n          width: 0.625rem;\n        }\n\n        .select-list::-webkit-scrollbar-track {\n          background: var(--bg-color-gray-900);\n        }\n\n        .select-list::-webkit-scrollbar-thumb {\n          background: var(--bg-color-gray-700);\n          border-radius: 0.625rem;\n          border: 0.125rem solid var(--bg-color-gray-900);\n        }\n\n        .select-list::-webkit-scrollbar-thumb:hover {\n          background: var(--bg-color-neutral-950);\n        }\n      </style>\n\n      <div\n        aria-expanded="false"\n        aria-haspopup="listbox"\n        aria-labelledby="selectedValue"\n        class="block-garden-select"\n        role="combobox"\n        tabindex="0"\n      >\n        <span class="selected-text placeholder" id="selectedValue">Choose resolution</span>\n        <span aria-hidden="true" class="chevron"></span>\n      </div>\n\n      <ul class="select-list" hidden id="selectList" role="listbox"></ul>\n\n      <input id="valueInput" type="hidden">\n    ',this.#e=this.attachShadow({mode:"open"}),this.#e.appendChild(e.content.cloneNode(!0)),this.#t=this.#e.querySelector(".block-garden-select"),this.#n=this.#e.querySelector("#selectList"),this.#r=this.#e.querySelector("#selectedValue"),this.#o=this.#e.querySelector("#valueInput")}connectedCallback(){requestAnimationFrame(()=>this.#a())}#a(){if(this.#i.length>0)return;0===this.querySelectorAll("block-garden-option").length&&(this.innerHTML='\n        <block-garden-option value="400">400x400</block-garden-option>\n        <block-garden-option value="800">800x800</block-garden-option>\n        <block-garden-option hidden="hidden" value="fullscreen">Fullscreen</block-garden-option>\n      '),this.#s();let e=-1;const t=()=>{this.#s(),this.#n.hidden=!1,this.#t.setAttribute("aria-expanded","true"),this.#i[0]?.focus(),e=0},n=()=>{this.#n.hidden=!0,this.#t.setAttribute("aria-expanded","false"),this.#t.focus(),e=-1},r=e=>{const t=e.dataset.value,r=e.textContent.trim();this.#r.textContent=r,this.#r.classList.remove("placeholder"),this.#o.value=t,this.#i.forEach(e=>e.setAttribute("aria-selected","false")),e.setAttribute("aria-selected","true"),n(),this.dispatchEvent(new CustomEvent("change",{detail:{value:t,label:r},bubbles:!0,composed:!0}))};this.#t.addEventListener("keydown",e=>{switch(e.key){case"Enter":case" ":e.preventDefault(),this.#n.hidden?t():n();break;case"ArrowDown":case"ArrowUp":e.preventDefault(),t();break;case"Escape":n()}}),this.#n.addEventListener("keydown",t=>{const o=t.target.closest(".select-item");if(o)switch(t.stopPropagation(),t.key){case"Enter":case" ":t.preventDefault(),r(o);break;case"Escape":n();break;case"ArrowDown":t.preventDefault(),e=(e+1)%this.#i.length,this.#i[e].focus();break;case"ArrowUp":t.preventDefault(),e=0===e?this.#i.length-1:e-1,this.#i[e].focus();break;case"Home":t.preventDefault(),this.#i[0].focus(),e=0;break;case"End":t.preventDefault(),this.#i[this.#i.length-1].focus(),e=this.#i.length-1}}),this.#t.addEventListener("click",e=>{e.stopPropagation(),this.#n.hidden?t():n()}),this.#e.addEventListener("click",e=>{const t=e.target.closest(".select-item");t&&(e.stopPropagation(),r(t))}),globalThis.document.addEventListener("click",e=>{this.contains(e.target)||n()}),Object.defineProperty(this,"value",{get:()=>this.#o.value,set:e=>{this.#o.value=e;const t=this.#n.querySelector(`[data-value="${e}"]`);t?(this.#r.textContent=t.textContent.trim(),this.#r.classList.remove("placeholder")):(this.#r.textContent=e,this.#r.classList.remove("placeholder"))}}),this.getAttribute("value")&&(this.value=this.getAttribute("value"))}#s(){this.#n.innerHTML="",this.#i=[],Array.from(this.querySelectorAll("block-garden-option")).forEach(e=>{if(e.hasAttribute("hidden"))return;const t=globalThis.document.createElement("li");t.className="select-item",t.setAttribute("role","option"),t.tabIndex=-1;const n=e.getAttribute("value")||"";t.dataset.value=n,t.textContent=e.textContent.trim(),this.#n.appendChild(t),this.#i.push(t)})}static get observedAttributes(){return["value"]}attributeChangedCallback(e){"value"===e&&(this.value=this.getAttribute("value"))}}globalThis.customElements?.get(ut)||globalThis.customElements.define(ut,dt);const ht="block-garden";class ft extends HTMLElement{constructor(){if(super(),!this.shadowRoot){const r=globalThis.document.createElement("template");r.innerHTML=`\n        <style>\n          [hidden] {\n            display: none !important;\n          }\n\n          :focus {\n            outline: none;\n          }\n\n          :host {\n            align-items: center;\n            display: flex;\n            height: var(--bg-ui-host-height, 100vh);\n            height: var(--bg-ui-host-height, 100dvh);\n            justify-content: center;\n            overflow: var(--bg-ui-host-overflow, hidden);\n            position: relative;\n            width: var(--bg-ui-host-width, 100vw);\n            width: var(--bg-ui-host-width, 100dvw);\n\n            ${n("--bg-color-",e)}\n            ${n("--bg-ui-",t)}\n            touch-action: none;\n          }\n\n          canvas {\n            background-color: var(--bg-color-black);\n            height: 25rem;\n            width: 25rem;\n            touch-action: none;\n          }\n\n          .ui-grid {\n            display: grid;\n            grid-template-columns: 1fr 1fr;\n            grid-template-rows: 1fr 1fr;\n            height: var(--bg-ui-grid-height, calc(100vh - 1rem));\n            height: var(--bg-ui-grid-height, calc(100dvh - 1rem));\n            margin: 0.5rem;\n            pointer-events: none;\n            position: absolute;\n            top: 0;\n            width: var(--bg-ui-grid-width, calc(100vw - 1rem));\n            width: var(--bg-ui-grid-width, calc(100dvw - 1rem));\n          }\n\n          .ui-grid__corner {\n            max-height: var(--bg-ui-grid-corner-max-height, calc(100vh - 1rem));\n            max-height: var(--bg-ui-grid-corner-max-height, calc(100dvh - 1rem));\n            overflow-y: auto;\n            pointer-events: auto;\n            transition: height 0.35s cubic-bezier(0.68, -0.55, 0.27, 1.5);\n          }\n\n          .ui-grid__corner--heading {\n            color: var(--bg-ui-grid-corner-heading-color);\n            backdrop-filter: blur(0.3125rem);\n            background-color: var(--bg-ui-grid-corner-heading-background-color);\n            border-radius: 0.5rem;\n            border-width: 0.0625rem;\n            border-style: solid;\n            border-color: var(--bg-ui-grid-corner-heading-border-color);\n            cursor: pointer;\n            font-size: 0.75rem;\n            padding: 0.75rem;\n          }\n\n          .ui-grid__corner--container {\n            color: var(--bg-ui-grid-corner-container-color);\n            padding: 0.5rem;\n          }\n\n          .ui-grid__corner--sub-heading {\n            color: var(--bg-ui-grid-corner-heading-color);\n            margin: 1rem 0 0.3125rem 0;\n          }\n\n          .ui-grid__corner--sub-section {\n            overflow: auto;\n          }\n\n          .ui-grid__corner {\n            scrollbar-width: thin; /* Slim scrollbar */\n            scrollbar-color: var(--bg-color-gray-700) var(--bg-color-stone-100); /* Handle and track colors */\n          }\n\n          .ui-grid__corner::-webkit-scrollbar {\n            width: 0.625rem; /* Custom width */\n          }\n\n          .ui-grid__corner::-webkit-scrollbar-track {\n            background: var(--bg-color-stone-100); /* Track background */\n          }\n\n          .ui-grid__corner::-webkit-scrollbar-thumb {\n            background: var(--bg-color-gray-700); /* Handle color */\n            border-radius: 0.625rem; /* Rounded edges */\n            border: 0.125rem solid var(--bg-color-stone-100); /* Padding around handle */\n          }\n\n          .ui-grid__corner::-webkit-scrollbar-thumb:hover {\n            background: var(--bg-color-neutral-950); /* Highlight on hover */\n          }\n\n          /* Element modifiers for sticky corners */\n          .ui-grid__corner--top-left {\n            align-self: start;\n            grid-column: 1;\n            grid-row: 1;\n            justify-self: start;\n          }\n\n          .ui-grid__corner--top-right {\n            align-self: start;\n            grid-column: 2;\n            grid-row: 1;\n            justify-self: end;\n            z-index: 1;\n          }\n\n          .ui-grid__corner--bottom-left {\n            align-self: end;\n            grid-column: 1;\n            grid-row: 2;\n            justify-self: start;\n          }\n\n          .ui-grid__corner--bottom-right {\n            align-self: end;\n            grid-column: 2;\n            grid-row: 2;\n            justify-self: end;\n            max-width: 15.625rem;\n          }\n\n          /* Mobile Responsive */\n          @media (min-width: 30rem) {\n            .ui-grid__corner--heading {\n              font-size: 1rem;\n            }\n\n            #stats,\n            #settings {\n              font-size: 0.725rem;\n            }\n          }\n\n          @media (min-width: 48rem) {\n            .ui-grid__corner--heading {\n              font-size: 1.25rem;\n            }\n\n            #stats,\n            #settings {\n              font-size: 1.25rem;\n            }\n          }\n\n          /* Stats Panel */\n          #stats {\n            backdrop-filter: blur(0.3125rem);\n            background: var(--bg-color-black-alpha-80);\n            border-radius: 0.5rem;\n            border: 0.0625rem solid var(--bg-color-gray-alpha-10);\n            color: var(--bg-color-white);\n          }\n\n          /* Settings Panel */\n          #settings {\n            backdrop-filter: blur(0.3125rem);\n            background: var(--bg-color-black-alpha-80);\n            border-radius: 0.5rem;\n            border: 0.0625rem solid var(--bg-color-gray-alpha-10);\n            color: var(--bg-color-white);\n            display: flex;\n            flex-direction: column;\n            position: relative;\n          }\n\n          #settings .settings-actions {\n            display: flex;\n            flex-direction: column;\n          }\n\n          #settings button {\n            width: 100%;\n          }\n\n          #resolution {\n            display: block;\n            margin: 0 0  0.25rem 0.125rem;\n            width: 100%;\n            position: relative;\n          }\n\n          .resolution-400 #canvas {\n            border: 0.125rem solid var(--bg-color-gray-900);\n            height: 25rem;\n            margin: auto;\n            width: 25rem;\n          }\n\n          .resolution-800 #canvas {\n            border: 0.125rem solid (var(--bg-color-gray-900));\n            height: 50rem;\n            margin: auto;\n            width: 50rem;\n          }\n\n          #loadInput {\n            padding-top: 0.5rem;\n          }\n\n          /* Touch Controls */\n          .touch-controls {\n            bottom: var(--bg-ui-touch-controls-bottom, 2rem);\n            position: var(--bg-ui-touch-controls-position, absolute);\n            width: var(--bg-ui-touch-controls-width, 100%);\n            touch-action: none;\n            pointer-events: none;\n          }\n\n          .touch-btn {\n            align-items: center;\n            backdrop-filter: blur(0.3125rem);\n            background: var(--bg-ui-touch-btn-background-color);\n            border-radius: 50%;\n            border: 0.125rem solid var(--bg-ui-touch-btn-border-color);\n            color: var(--bg-ui-touch-btn-color);\n            cursor: pointer;\n            display: inline-flex;\n            font-size: 0.7rem;\n            height: 3.25rem;\n            justify-content: center;\n            padding: 0.125rem;\n            pointer-events: auto;\n            touch-action: manipulation;\n            user-select: none;\n            width: 3.25rem;\n            z-index: 3;\n          }\n\n          .touch-btn:active {\n            background: var(--bg-color-gray-alpha-20);\n            transform: scale(0.95);\n          }\n\n\n          .dpad-container {\n            display: flex;\n            flex-direction: row;\n            justify-content: space-between;\n            padding: 0 1rem 1rem 0.5rem;\n          }\n\n          .dpad {\n            display: grid;\n            gap: 0.3125rem;\n            grid-template-columns: 3.125rem 3.125rem 3.125rem;\n            grid-template-rows: 3.125rem 3.125rem 3.125rem;\n            justify-content: left;\n            position: relative;\n            z-index: 3;\n          }\n\n          .dpad .up-left {\n            grid-column: 1;\n            grid-row: 1;\n            margin-left: 0.5rem;\n            margin-top: 0.5rem;\n            padding: 0;\n            z-index: 4;\n          }\n\n          .dpad .up {\n            grid-column: 2;\n            grid-row: 1;\n          }\n\n          .dpad .up-right {\n            grid-column: 3;\n            grid-row: 1;\n            margin-right: 0.5rem;\n            margin-top: 0.5rem;\n            padding: 0;\n            z-index: 4;\n          }\n\n          .dpad .left {\n            grid-column: 1;\n            grid-row: 2;\n            margin-top: 0.125rem;\n          }\n\n          .dpad .middle {\n            grid-column: 2;\n            grid-row: 2;\n            z-index: 2;\n          }\n\n          .dpad .right {\n            grid-column: 3;\n            grid-row: 2;\n            margin-top: 0.125rem;\n          }\n\n          .dpad .down-left {\n            grid-column: 1;\n            grid-row: 3;\n            margin-bottom: 0.5rem;\n            margin-left: 0.5rem;\n            padding: 0;\n            z-index: 4;\n          }\n\n          .dpad .down {\n            grid-column: 2;\n            grid-row: 3;\n          }\n\n          .dpad .down-right {\n            grid-column: 3;\n            grid-row: 3;\n            margin-bottom: 0.5rem;\n            margin-right: 0.5rem;\n            padding: 0;\n            z-index: 4;\n          }\n\n          .action-buttons {\n            display: flex;\n            flex-wrap: wrap;\n            gap: 0.625rem;\n            justify-content: end;\n          }\n\n          /* Button Styles */\n          button {\n            background: var(--bg-color-green-500);\n            border-radius: 0.25rem;\n            border: none;\n            color: var(--bg-color-white);\n            cursor: pointer;\n            font-size: 0.625rem;\n            margin: 0.125rem;\n            padding: 0.375rem 0.75rem;\n            transition: background 0.2s;\n          }\n\n          button:hover,\n          button:focus {\n            outline: none;\n          }\n\n          button:active {\n            transform: scale(0.95);\n          }\n\n          #privacy {\n            color: var(--bg-color-white);\n          }\n        </style>\n        <canvas id="canvas" tabindex="0"></canvas>\n        <div id="ui-grid" class="ui-grid">\n          <div class="ui-grid__corner ui-grid__corner--top-left">\n            <div id="stats">\n              <div class="ui-grid__corner--heading"> Block Garden</div>\n              <div class="ui-grid__corner--container" hidden="hidden">\n                Block: <span id="blockName"></span><br />\n                [ <b>~ / &#96;</b> ]: Change Block<br />\n                [ w / a / s / d ]: Move<br />\n                [ space ]: Up<br />\n                [ shift ]: Down<br />\n                Click To Lock Mouse<br />\n                Left Click: Place Block<br />\n                Right Click: Remove Block<br />\n                <a id="privacy" href="privacy/index.html" target="_blank">Privacy Policy</a>\n              </div>\n            </div>\n          </div>\n\n          <div class="ui-grid__corner ui-grid__corner--top-right">\n            <div id="settings">\n              <div class="ui-grid__corner--heading"> Settings</div>\n              <div class="ui-grid__corner--container" hidden="hidden">\n                <div class="settings-actions">\n                  <div id="resolution">\n                    <block-garden-select id="resolutionSelect" value="400">\n                      <block-garden-option value="400">400x400</block-garden-option>\n                      <block-garden-option value="800">800x800</block-garden-option>\n                      <block-garden-option value="fullscreen">Fullscreen</block-garden-option>\n                    </block-garden-select>\n                  </div>\n                  <button\n                    id="generateWorldButton"\n                  >Generate World</button>\n                  <button\n                    id="randomPlantButton"\n                  >Plant randomly</button>\n                  <button\n                    id="fastGrowthButton"\n                  >Enable Fast Growth</button>\n                  <button\n                    id="togglePrePlanting"\n                  >Disable Pre-Planting</button>\n                  <button\n                    id="toggleTouchControls"\n                  >Disable Touch Controls</button>\n                  <button\n                    id="saveWorld"\n                  > Save</button>\n                  <input\n                    accept=".json.gz"\n                    id="loadInput"\n                    type="file"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class="ui-grid__corner ui-grid__corner--bottom-left" hidden="hidden">\n            <div class="ui-grid__corner--heading">\n              <div class="ui-grid__corner--container" hidden="hidden"></div>\n            </div>\n          </div>\n\n          <div class="ui-grid__corner ui-grid__corner--bottom-right" hidden="hidden">\n            <div class="ui-grid__corner--heading">\n              <div class="ui-grid__corner--container" hidden="hidden"></div>\n            </div>\n          </div>\n        </div>\n\n        <div class="touch-controls" hidden="hidden">\n          <div class="dpad-container">\n            <div class="dpad">\n              <div class="touch-btn up-left" data-key="upleft"></div>\n              <div class="touch-btn up" data-key="w"></div>\n              <div class="touch-btn up-right" data-key="upright"></div>\n\n              <div class="touch-btn left" data-key="a"></div>\n              <div class="touch-btn middle" data-key="backquote"></div>\n              <div class="touch-btn right" data-key="d"></div>\n\n              <div class="touch-btn down-left" data-key="downleft"></div>\n              <div class="touch-btn down" data-key="s"></div>\n              <div class="touch-btn down-right" data-key="downright"></div>\n            </div>\n            <div class="dpad">\n              <div class="up-left"></div>\n              <div id="fly" class="touch-btn up" data-key=" " hidden="hidden"></div>\n              <div class="up-right"></div>\n\n              <div id="dig" class="touch-btn left" data-key="backspace"></div>\n              <div id="jump" class="touch-btn middle" data-key=" ">\n                \n              </div>\n              <div class="right"></div>\n\n              <div class="down-left"></div>\n              <div id="descend" class="touch-btn down" data-key="shift" hidden="hidden"></div>\n              <div class="down-right"></div>\n            </div>\n          </div>\n        </div>\n      `;this.attachShadow({mode:"open"}).appendChild(r.content.cloneNode(!0))}}async connectedCallback(){const e=this.shadowRoot,t=e.querySelector("canvas");await lt(globalThis,e,t)}async disconnectedCallback(){}}globalThis.customElements?.get(ht)||globalThis.customElements?.define(ht,ft);export{ft as BlockGarden,ht as tagName};
